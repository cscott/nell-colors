/**
 * @license RequireJS domReady 1.0.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
/**
 * @license RequireJS text 1.0.7 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
define("domReady",[],function(){function i(a){for(var b=0,d;d=a[b];b++)d(c)}function j(){var a=d,c=e;b&&(a.length&&(d=[],i(a)),f.resourcesDone&&c.length&&(e=[],i(c)))}function k(){b||(b=!0,h&&clearInterval(h),j())}function l(a){return b?a(c):d.push(a),l}var a=typeof window!="undefined"&&window.document,b=!a,c=a?document:null,d=[],e=[],f=requirejs||require||{},g=f.resourcesReady,h;return"resourcesReady"in f&&(f.resourcesReady=function(a){g&&g(a),a&&j()}),a&&(document.addEventListener?(document.addEventListener("DOMContentLoaded",k,!1),window.addEventListener("load",k,!1)):window.attachEvent&&(window.attachEvent("onload",k),self===self.top&&(h=setInterval(function(){try{document.body&&(document.documentElement.doScroll("left"),k())}catch(a){}},30))),document.readyState==="complete"&&k()),l.withResources=function(a){return b&&f.resourcesDone?a(c):e.push(a),l},l.version="1.0.0",l.load=function(a,b,c,d){d.isBuild?c(null):l(c)},l}),define("img",[],function(){return{load:function(a,b,c,d){if(d.isBuild||typeof document=="undefined")c(null);else{var e=document.createElement("img");e.addEventListener("load",function(){c(e)}),e.src=b.toUrl(a)}}}}),function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!="undefined"&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,g=d&&(location.port||undefined),h=[];define("text",[],function(){var i,j,k;return typeof window!="undefined"&&window.navigator&&window.document?j=function(a,b){var c=i.createXhr();c.open("GET",a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!="undefined"&&process.versions&&!!process.versions.node?(k=require.nodeRequire("fs"),j=function(a,b){var c=k.readFileSync(a,"utf8");c.indexOf("ï»¿")===0&&(c=c.substring(1)),b(c)}):typeof Packages!="undefined"?j=function(a,b){var c="utf-8",d=new java.io.File(a),e=java.lang.System.getProperty("line.separator"),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i="";try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}:typeof XMLHttpRequest!="undefined"?j=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send(null)}:console.warn("No GET implementation found for text plugin."),i={version:"1.0.7",strip:function(a){if(a){a=a.replace(b,"");var d=a.match(c);d&&(a=d[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}if(!b)throw new Error("createXhr(): XMLHttpRequest not available");return b},get:j,parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf("!"),c!==-1&&(b=e.substring(c+1,e.length),b=b==="strip",e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=i.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(":"),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText){c();return}var j=i.parseName(a),k=j.moduleName+"."+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+"."+j.ext,j.strip,a,c,h)})},write:function(a,b,c,d){if(b in h){var e=i.jsEscape(h[b]);c.asModule(a+"!"+b,"define(function () { return '"+e+"';});\n")}},writeFile:function(a,b,c,d,e){var f=i.parseName(b),g=f.moduleName+"."+f.ext,h=c.toUrl(f.moduleName+"."+f.ext)+".js";i.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},i.write(a,g,c,e)},e)}},i})}(),define("text!src/brushdialog.html",[],function(){return'<!-- this is innerHTML for a wrapper div -->\n    <div class="page_select">\n      <a class="color_select" href="#"><span></span></a><!--\n      --><a class="brush_select" href="#"><span></span></a>\n    </div>\n    <div class="panes">\n      <div class="color_options">\n        <div class="swatches">\n             <a href="#" class="white"><span></span></a><!--\n          --><a href="#" class="old"><span></span></a><!--\n          --><a          class="new" tabindex="-1"><span></span></a><!--\n          --><a href="#" class="black"><span></span></a>\n        </div>\n        <div class="wheel">\n          <div class="color" tabindex="0">\n            <div class="white"></div>\n            <div class="black"></div>\n          </div>\n          <div class="thumb"></div>\n          <input type="hidden" class="color_hue" />\n          <input type="hidden" class="color_saturation" />\n        </div>\n        <div class="lightness">\n          <input class="color_lightness" type="hidden" />\n        </div>\n      </div>\n      <div class="brush_options">\n        <div class="stroke"></div>\n        <div class="shape" tabindex="0"><div class="scrollwrapper"><div class="allbrushes"></div></div></div>\n        <div class="spacing">\n          <div class="caption" data-amount="1"></div>\n          <a class="minus" href="#" tabindex="-1"></a><input class="brush_spacing" type="hidden" /><a class="plus" href="#" tabindex="-1"></a>\n        </div>\n        <div class="size">\n          <div class="caption" data-amount="1"></div>\n          <a class="minus" href="#" tabindex="-1"></a><input class="brush_size" type="hidden" /><a class="plus" href="#" tabindex="-1"></a>\n        </div>\n      </div>\n    </div>\n    <div class="spacer"></div>\n    <div class="opacity_options">\n     <input class="color_opacity" type="hidden" />\n    </div>\n    <div class="close_pane">\n      <a class="closer" href="#"></a>\n    </div>\n    <input type="hidden" class="old_color_hue" />\n    <input type="hidden" class="old_color_saturation" />\n    <input type="hidden" class="old_color_lightness"  />\n    <input type="hidden" class="old_color_opacity"  />\n'}),define("src/coords",[],function(){var a=function(b){if(b.getBoundingClientRect){var c=b.getBoundingClientRect();return{x:c.left+document.body.scrollLeft,y:c.top+document.body.scrollTop}}var d={x:b.offsetLeft,y:b.offsetTop};if(b.offsetParent){var e=a(b.offsetParent);d.x+=e.x,d.y+=e.y}return d},b=function(b,c){var d,e,f;b=b||window.event;var g=b.target||b.srcElement;if(!window.opera&&typeof b.offsetX!="undefined"){f={x:b.offsetX,y:b.offsetY};var h=g;while(h)h.mouseX=f.x,h.mouseY=f.y,f.x+=h.offsetLeft,f.y+=h.offsetTop,h=h.offsetParent;h=c;var i={x:0,y:0};while(h){if(typeof h.mouseX!="undefined"){d=h.mouseX-i.x,e=h.mouseY-i.y;break}i.x+=h.offsetLeft,i.y+=h.offsetTop,h=h.offsetParent}h=g;while(h)h.mouseX=undefined,h.mouseY=undefined,h=h.offsetParent}else f=a(c),d=b.pageX-f.x,e=b.pageY-f.y;return{x:d,y:e}};return{getRelativeEventPosition:b,getAbsolutePosition:a}}),define("src/compat",[],function(){Function.prototype.bind||(Function.prototype.bind=function(a){var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Object.freeze||(Object.freeze=function(a){return a});var a=function(){console.warn("Faking Web Worker creation.")};a.prototype={postMessage:function(a){},addEventListener:function(a,b){}};var b={Worker:typeof Worker=="undefined"?a:Worker,Uint8Array:typeof Uint8Array=="undefined"?Array:Uint8Array,Float64Array:typeof Float64Array=="undefined"?Array:Float64Array};return typeof window!="undefined"&&function(){var a=0,c=["ms","moz","webkit","o"],d;for(d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(console.log("Using requestAnimationFrame fallback."),window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),b.requestAnimationFrame=window.requestAnimationFrame.bind(window),b.cancelAnimationFrame=window.cancelAnimationFrame.bind(window)}(),typeof document!="undefined"&&!("classList"in document.createElement("a"))&&function(a){if(!("HTMLElement"in a||"Element"in a))return;var b="classList",c="prototype",d=(a.HTMLElement||a.Element)[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(b==="")throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){var b=f.call(a.className),c=b?b.split(/\s+/):[],d=0,e=c.length;for(;d<e;d++)this.push(c[d]);this._updateClassName=function(){a.className=this.toString()}},k=j[c]=[],l=function(){return new j(this)};h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",i(this,a)!==-1},k.add=function(a){a+="",i(this,a)===-1&&(this.push(a),this._updateClassName())},k.remove=function(a){a+="";var b=i(this,a);b!==-1&&(this.splice(b,1),this._updateClassName())},k.toggle=function(a){a+="",i(this,a)===-1?this.add(a):this.remove(a)},k.toString=function(){return this.join(" ")};if(e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){n.number===-2146823252&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}(self),b}),define("src/iscroll",[],function(){return function(a,b){function E(a){return e===""?a:(a=a.charAt(0).toUpperCase()+a.substr(1),e+a)}var c=Math,d=b.createElement("div").style,e=function(){var a="t,webkitT,MozT,msT,OT".split(","),b,c=0,e=a.length;for(;c<e;c++){b=a[c]+"ransform";if(b in d)return a[c].substr(0,a[c].length-1)}return!1}(),f=e?"-"+e.toLowerCase()+"-":"",g=E("transform"),h=E("transitionProperty"),i=E("transitionDuration"),j=E("transformOrigin"),k=E("transitionTimingFunction"),l=E("transitionDelay"),m=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),p=E("perspective")in d,q="ontouchstart"in a&&!o,r=!!e,s=E("transition")in d,t="onorientationchange"in a?"orientationchange":"resize",u=q?"touchstart":"mousedown",v=q?"touchmove":"mousemove",w=q?"touchend":"mouseup",x=q?"touchcancel":"mouseup",y=e=="Moz"?"DOMMouseScroll":"mousewheel",z=function(){if(e===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return a[e]}(),A=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),B=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),C=p?" translateZ(0)":"",D=function(c,d){var e=this,l;e.wrapper=typeof c=="object"?c:b.getElementById(c),e.wrapper.style.overflow="hidden",e.scroller=e.wrapper.children[0],e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:m,hideScrollbar:n,fadeScrollbar:n&&p,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in d)e.options[l]=d[l];e.x=e.options.x,e.y=e.options.y,e.options.useTransform=r&&e.options.useTransform,e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar,e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar,e.options.zoom=e.options.useTransform&&e.options.zoom,e.options.useTransition=s&&e.options.useTransition,e.options.zoom&&m&&(C=""),e.scroller.style[h]=e.options.useTransform?f+"transform":"top left",e.scroller.style[i]="0",e.scroller.style[j]="0 0",e.options.useTransition&&(e.scroller.style[k]="cubic-bezier(0.33,0.66,0.66,1)"),e.options.useTransform?e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px)"+C:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px",e.options.useTransition&&(e.options.fixedScrollbar=!0),e.refresh(),e._bind(t,a),e._bind(u),q||e.options.wheelAction!="none"&&e._bind(y),e.options.checkDOMChanges&&(e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500))};return D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case u:if(!q&&a.button!==0)return;b._start(a);break;case v:b._move(a);break;case w:case x:b._end(a);break;case t:b._resize();break;case y:b._wheel(a);break;case z:b._transitionEnd(a)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(a){var d=this,e;if(!d[a+"Scrollbar"]){d[a+"ScrollbarWrapper"]&&(r&&(d[a+"ScrollbarIndicator"].style[g]=""),d[a+"ScrollbarWrapper"].parentNode.removeChild(d[a+"ScrollbarWrapper"]),d[a+"ScrollbarWrapper"]=null,d[a+"ScrollbarIndicator"]=null);return}d[a+"ScrollbarWrapper"]||(e=b.createElement("div"),d.options.scrollbarClass?e.className=d.options.scrollbarClass+a.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:"+(d.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(d.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+f+"transition-property:opacity;"+f+"transition-duration:"+(d.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(d.options.hideScrollbar?"0":"1"),d.wrapper.appendChild(e),d[a+"ScrollbarWrapper"]=e,e=b.createElement("div"),d.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+f+"background-clip:padding-box;"+f+"box-sizing:border-box;"+(a=="h"?"height:100%":"width:100%")+";"+f+"border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;"+f+"transition-property:"+f+"transform;"+f+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+f+"transition-duration:0;"+f+"transform: translate(0,0)"+C,d.options.useTransition&&(e.style.cssText+=";"+f+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),d[a+"ScrollbarWrapper"].appendChild(e),d[a+"ScrollbarIndicator"]=e),a=="h"?(d.hScrollbarSize=d.hScrollbarWrapper.clientWidth,d.hScrollbarIndicatorSize=c.max(c.round(d.hScrollbarSize*d.hScrollbarSize/d.scrollerW),8),d.hScrollbarIndicator.style.width=d.hScrollbarIndicatorSize+"px",d.hScrollbarMaxScroll=d.hScrollbarSize-d.hScrollbarIndicatorSize,d.hScrollbarProp=d.hScrollbarMaxScroll/d.maxScrollX):(d.vScrollbarSize=d.vScrollbarWrapper.clientHeight,d.vScrollbarIndicatorSize=c.max(c.round(d.vScrollbarSize*d.vScrollbarSize/d.scrollerH),8),d.vScrollbarIndicator.style.height=d.vScrollbarIndicatorSize+"px",d.vScrollbarMaxScroll=d.vScrollbarSize-d.vScrollbarIndicatorSize,d.vScrollbarProp=d.vScrollbarMaxScroll/d.maxScrollY),d._scrollbarPos(a,!0)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},m?200:0)},_pos:function(a,b){if(this.zoomed)return;a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[g]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+C:(a=c.round(a),b=c.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(a,b){var d=this,e=a=="h"?d.x:d.y,f;if(!d[a+"Scrollbar"])return;e=d[a+"ScrollbarProp"]*e,e<0?(d.options.fixedScrollbar||(f=d[a+"ScrollbarIndicatorSize"]+c.round(e*3),f<8&&(f=8),d[a+"ScrollbarIndicator"].style[a=="h"?"width":"height"]=f+"px"),e=0):e>d[a+"ScrollbarMaxScroll"]&&(d.options.fixedScrollbar?e=d[a+"ScrollbarMaxScroll"]:(f=d[a+"ScrollbarIndicatorSize"]-c.round((e-d[a+"ScrollbarMaxScroll"])*3),f<8&&(f=8),d[a+"ScrollbarIndicator"].style[a=="h"?"width":"height"]=f+"px",e=d[a+"ScrollbarMaxScroll"]+(d[a+"ScrollbarIndicatorSize"]-f))),d[a+"ScrollbarWrapper"].style[l]="0",d[a+"ScrollbarWrapper"].style.opacity=b&&d.options.hideScrollbar?"0":"1",d[a+"ScrollbarIndicator"].style[g]="translate("+(a=="h"?e+"px,0)":"0,"+e+"px)")+C},_start:function(b){var d=this,e=q?b.touches[0]:b,f,h,i,j,k;if(!d.enabled)return;d.options.onBeforeScrollStart&&d.options.onBeforeScrollStart.call(d,b),(d.options.useTransition||d.options.zoom)&&d._transitionTime(0),d.moved=!1,d.animating=!1,d.zoomed=!1,d.distX=0,d.distY=0,d.absDistX=0,d.absDistY=0,d.dirX=0,d.dirY=0,d.options.zoom&&q&&b.touches.length>1&&(j=c.abs(b.touches[0].pageX-b.touches[1].pageX),k=c.abs(b.touches[0].pageY-b.touches[1].pageY),d.touchesDistStart=c.sqrt(j*j+k*k),d.originX=c.abs(b.touches[0].pageX+b.touches[1].pageX-d.wrapperOffsetLeft*2)/2-d.x,d.originY=c.abs(b.touches[0].pageY+b.touches[1].pageY-d.wrapperOffsetTop*2)/2-d.y,d.options.onZoomStart&&d.options.onZoomStart.call(d,b));if(d.options.momentum){d.options.useTransform?(f=getComputedStyle(d.scroller,null)[g].replace(/[^0-9\-.,]/g,"").split(","),h=+f[4],i=+f[5]):(h=+getComputedStyle(d.scroller,null).left.replace(/[^0-9-]/g,""),i=+getComputedStyle(d.scroller,null).top.replace(/[^0-9-]/g,""));if(h!=d.x||i!=d.y)d.options.useTransition?d._unbind(z):B(d.aniTime),d.steps=[],d._pos(h,i),d.options.onScrollEnd&&d.options.onScrollEnd.call(d)}d.absStartX=d.x,d.absStartY=d.y,d.startX=d.x,d.startY=d.y,d.pointX=e.pageX,d.pointY=e.pageY,d.startTime=b.timeStamp||Date.now(),d.options.onScrollStart&&d.options.onScrollStart.call(d,b),d._bind(v,a),d._bind(w,a),d._bind(x,a)},_move:function(a){var b=this,d=q?a.touches[0]:a,e=d.pageX-b.pointX,f=d.pageY-b.pointY,h=b.x+e,i=b.y+f,j,k,l,m=a.timeStamp||Date.now();b.options.onBeforeScrollMove&&b.options.onBeforeScrollMove.call(b,a);if(b.options.zoom&&q&&a.touches.length>1){j=c.abs(a.touches[0].pageX-a.touches[1].pageX),k=c.abs(a.touches[0].pageY-a.touches[1].pageY),b.touchesDist=c.sqrt(j*j+k*k),b.zoomed=!0,l=1/b.touchesDistStart*b.touchesDist*this.scale,l<b.options.zoomMin?l=.5*b.options.zoomMin*Math.pow(2,l/b.options.zoomMin):l>b.options.zoomMax&&(l=2*b.options.zoomMax*Math.pow(.5,b.options.zoomMax/l)),b.lastScale=l/this.scale,h=this.originX-this.originX*b.lastScale+this.x,i=this.originY-this.originY*b.lastScale+this.y,this.scroller.style[g]="translate("+h+"px,"+i+"px) scale("+l+")"+C,b.options.onZoom&&b.options.onZoom.call(b,a);return}b.pointX=d.pageX,b.pointY=d.pageY;if(h>0||h<b.maxScrollX)h=b.options.bounce?b.x+e/2:h>=0||b.maxScrollX>=0?0:b.maxScrollX;if(i>b.minScrollY||i<b.maxScrollY)i=b.options.bounce?b.y+f/2:i>=b.minScrollY||b.maxScrollY>=0?b.minScrollY:b.maxScrollY;b.distX+=e,b.distY+=f,b.absDistX=c.abs(b.distX),b.absDistY=c.abs(b.distY);if(b.absDistX<6&&b.absDistY<6)return;b.options.lockDirection&&(b.absDistX>b.absDistY+5?(i=b.y,f=0):b.absDistY>b.absDistX+5&&(h=b.x,e=0)),b.moved=!0,b._pos(h,i),b.dirX=e>0?-1:e<0?1:0,b.dirY=f>0?-1:f<0?1:0,m-b.startTime>300&&(b.startTime=m,b.startX=b.x,b.startY=b.y),b.options.onScrollMove&&b.options.onScrollMove.call(b,a)},_end:function(d){if(q&&d.touches.length!==0)return;var e=this,f=q?d.changedTouches[0]:d,h,j,k={dist:0,time:0},l={dist:0,time:0},m=(d.timeStamp||Date.now())-e.startTime,n=e.x,o=e.y,p,r,s,t,u;e._unbind(v,a),e._unbind(w,a),e._unbind(x,a),e.options.onBeforeScrollEnd&&e.options.onBeforeScrollEnd.call(e,d);if(e.zoomed){u=e.scale*e.lastScale,u=Math.max(e.options.zoomMin,u),u=Math.min(e.options.zoomMax,u),e.lastScale=u/e.scale,e.scale=u,e.x=e.originX-e.originX*e.lastScale+e.x,e.y=e.originY-e.originY*e.lastScale+e.y,e.scroller.style[i]="200ms",e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+e.scale+")"+C,e.zoomed=!1,e.refresh(),e.options.onZoomEnd&&e.options.onZoomEnd.call(e,d);return}if(!e.moved){q&&(e.doubleTapTimer&&e.options.zoom?(clearTimeout(e.doubleTapTimer),e.doubleTapTimer=null,e.options.onZoomStart&&e.options.onZoomStart.call(e,d),e.zoom(e.pointX,e.pointY,e.scale==1?e.options.doubleTapZoom:1),e.options.onZoomEnd&&setTimeout(function(){e.options.onZoomEnd.call(e,d)},200)):this.options.handleClick&&(e.doubleTapTimer=setTimeout(function(){e.doubleTapTimer=null,h=f.target;while(h.nodeType!=1)h=h.parentNode;h.tagName!="SELECT"&&h.tagName!="INPUT"&&h.tagName!="TEXTAREA"&&(j=b.createEvent("MouseEvents"),j.initMouseEvent("click",!0,!0,d.view,1,f.screenX,f.screenY,f.clientX,f.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null),j._fake=!0,h.dispatchEvent(j))},e.options.zoom?250:0))),e._resetPos(400),e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d);return}if(m<300&&e.options.momentum){k=n?e._momentum(n-e.startX,m,-e.x,e.scrollerW-e.wrapperW+e.x,e.options.bounce?e.wrapperW:0):k,l=o?e._momentum(o-e.startY,m,-e.y,e.maxScrollY<0?e.scrollerH-e.wrapperH+e.y-e.minScrollY:0,e.options.bounce?e.wrapperH:0):l,n=e.x+k.dist,o=e.y+l.dist;if(e.x>0&&n>0||e.x<e.maxScrollX&&n<e.maxScrollX)k={dist:0,time:0};if(e.y>e.minScrollY&&o>e.minScrollY||e.y<e.maxScrollY&&o<e.maxScrollY)l={dist:0,time:0}}if(k.dist||l.dist){s=c.max(c.max(k.time,l.time),10),e.options.snap&&(p=n-e.absStartX,r=o-e.absStartY,c.abs(p)<e.options.snapThreshold&&c.abs(r)<e.options.snapThreshold?e.scrollTo(e.absStartX,e.absStartY,200):(t=e._snap(n,o),n=t.x,o=t.y,s=c.max(t.time,s))),e.scrollTo(c.round(n),c.round(o),s),e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d);return}if(e.options.snap){p=n-e.absStartX,r=o-e.absStartY,c.abs(p)<e.options.snapThreshold&&c.abs(r)<e.options.snapThreshold?e.scrollTo(e.absStartX,e.absStartY,200):(t=e._snap(e.x,e.y),(t.x!=e.x||t.y!=e.y)&&e.scrollTo(t.x,t.y,t.time)),e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d);return}e._resetPos(200),e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d)},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;if(c==b.x&&d==b.y){b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&(e=="webkit"&&(b.hScrollbarWrapper.style[l]="300ms"),b.hScrollbarWrapper.style.opacity="0"),b.vScrollbar&&b.options.hideScrollbar&&(e=="webkit"&&(b.vScrollbarWrapper.style[l]="300ms"),b.vScrollbarWrapper.style.opacity="0");return}b.scrollTo(c,d,a||0)},_wheel:function(a){var b=this,c,d,e,f,g;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,d=a.wheelDeltaY/12;else if("wheelDelta"in a)c=d=a.wheelDelta/12;else if("detail"in a)c=d=-a.detail*3;else return;if(b.options.wheelAction=="zoom"){g=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),g<b.options.zoomMin&&(g=b.options.zoomMin),g>b.options.zoomMax&&(g=b.options.zoomMax),g!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,g,400),setTimeout(function(){b.wheelZoomCount--,!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400));return}e=b.x+c,f=b.y+d,e>0?e=0:e<b.maxScrollX&&(e=b.maxScrollX),f>b.minScrollY?f=b.minScrollY:f<b.maxScrollY&&(f=b.maxScrollY),b.maxScrollY<0&&b.scrollTo(e,f,0)},_transitionEnd:function(a){var b=this;if(a.target!=b.scroller)return;b._unbind(z),b._startAni()},_startAni:function(){var a=this,b=a.x,d=a.y,e=Date.now(),f,g,h;if(a.animating)return;if(!a.steps.length){a._resetPos(400);return}f=a.steps.shift(),f.x==b&&f.y==d&&(f.time=0),a.animating=!0,a.moved=!0;if(a.options.useTransition){a._transitionTime(f.time),a._pos(f.x,f.y),a.animating=!1,f.time?a._bind(z):a._resetPos(0);return}h=function(){var i=Date.now(),j,k;if(i>=e+f.time){a._pos(f.x,f.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni();return}i=(i-e)/f.time-1,g=c.sqrt(1-i*i),j=(f.x-b)*g+b,k=(f.y-d)*g+d,a._pos(j,k),a.animating&&(a.aniTime=A(h))},h()},_transitionTime:function(a){a+="ms",this.scroller.style[i]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[i]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[i]=a)},_momentum:function(a,b,d,e,f){var g=6e-4,h=c.abs(a)/b,i=h*h/(2*g),j=0,k=0;return a>0&&i>d?(k=f/(6/(i/h*g)),d+=k,h=h*d/i,i=d):a<0&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=a<0?-1:1,j=h/g,{dist:i,time:c.round(j)}},_offset:function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent)b-=a.offsetLeft,c-=a.offsetTop;return a!=this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(a,b){var d=this,e,f,g,h,i,j;g=d.pagesX.length-1;for(e=0,f=d.pagesX.length;e<f;e++)if(a>=d.pagesX[e]){g=e;break}g==d.currPageX&&g>0&&d.dirX<0&&g--,a=d.pagesX[g],i=c.abs(a-d.pagesX[d.currPageX]),i=i?c.abs(d.x-a)/i*500:0,d.currPageX=g,g=d.pagesY.length-1;for(e=0;e<g;e++)if(b>=d.pagesY[e]){g=e;break}return g==d.currPageY&&g>0&&d.dirY<0&&g--,b=d.pagesY[g],j=c.abs(b-d.pagesY[d.currPageY]),j=j?c.abs(d.y-b)/j*500:0,d.currPageY=g,h=c.round(c.max(i,j))||200,{x:a,y:b,time:h}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[g]="",b.hScrollbar=!1,b.vScrollbar=!1,b._scrollbar("h"),b._scrollbar("v"),b._unbind(t,a),b._unbind(u),b._unbind(v,a),b._unbind(w,a),b._unbind(x,a),b.options.hasTouch||b._unbind(y),b.options.useTransition&&b._unbind(z),b.options.checkDOMChanges&&clearInterval(b.checkDOMTime),b.options.onDestroy&&b.options.onDestroy.call(b)},refresh:function(){var a=this,b,d,e,f,g=0,h=0;a.scale<a.options.zoomMin&&(a.scale=a.options.zoomMin),a.wrapperW=a.wrapper.clientWidth||1,a.wrapperH=a.wrapper.clientHeight||1,a.minScrollY=-a.options.topOffset||0,a.scrollerW=c.round(a.scroller.offsetWidth*a.scale),a.scrollerH=c.round((a.scroller.offsetHeight+a.minScrollY)*a.scale),a.maxScrollX=a.wrapperW-a.scrollerW,a.maxScrollY=a.wrapperH-a.scrollerH+a.minScrollY,a.dirX=0,a.dirY=0,a.options.onRefresh&&a.options.onRefresh.call(a),a.hScroll=a.options.hScroll&&a.maxScrollX<0,a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH),a.hScrollbar=a.hScroll&&a.options.hScrollbar,a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH,b=a._offset(a.wrapper),a.wrapperOffsetLeft=-b.left,a.wrapperOffsetTop=-b.top;if(typeof a.options.snap=="string"){a.pagesX=[],a.pagesY=[],f=a.scroller.querySelectorAll(a.options.snap);for(d=0,e=f.length;d<e;d++)g=a._offset(f[d]),g.left+=a.wrapperOffsetLeft,g.top+=a.wrapperOffsetTop,a.pagesX[d]=g.left<a.maxScrollX?a.maxScrollX:g.left*a.scale,a.pagesY[d]=g.top<a.maxScrollY?a.maxScrollY:g.top*a.scale}else if(typeof a.options.snap=="number"){a.pagesX=[];while(g>=a.maxScrollX)a.pagesX[h]=g,g-=a.options.snap,h++;a.maxScrollX%a.options.snap&&(a.pagesX[a.pagesX.length]=a.maxScrollX-a.pagesX[a.pagesX.length-1]+a.pagesX[a.pagesX.length-1]),g=0,h=0,a.pagesY=[];while(g>=a.maxScrollY)a.pagesY[h]=g,g-=a.options.snap,h++;a.maxScrollY%a.options.snap&&(a.pagesY[a.pagesY.length]=a.maxScrollY-a.pagesY[a.pagesY.length-1]+a.pagesY[a.pagesY.length-1])}else if(a.options.snap){a.pagesX=[];while(g>=a.maxScrollX)a.pagesX[h]=g,g-=a.wrapperW,h++;a.maxScrollX%a.wrapperW&&(a.pagesX[a.pagesX.length]=a.maxScrollX-a.pagesX[a.pagesX.length-1]+a.pagesX[a.pagesX.length-1]),g=0,h=0,a.pagesY=[];while(g>=a.maxScrollY)a.pagesY[h]=g,g-=a.wrapperH,h++;a.maxScrollY%a.wrapperH&&(a.pagesY[a.pagesY.length]=a.maxScrollY-a.pagesY[a.pagesY.length-1]+a.pagesY[a.pagesY.length-1])}a._scrollbar("h"),a._scrollbar("v"),a.zoomed||(a.scroller.style[i]="0",a._resetPos(400))},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;e.stop(),f.length||(f=[{x:a,y:b,time:c,relative:d}]);for(g=0,h=f.length;g<h;g++)f[g].relative&&(f[g].x=e.x-f[g].x,f[g].y=e.y-f[g].y),e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0});e._startAni()},scrollToElement:function(a,b){var d=this,e;a=a.nodeType?a:d.scroller.querySelector(a);if(!a)return;e=d._offset(a),e.left+=d.wrapperOffsetLeft,e.top+=d.wrapperOffsetTop,e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left,e.top=e.top>d.minScrollY?d.minScrollY:e.top<d.maxScrollY?d.maxScrollY:e.top,b=b===undefined?c.max(c.abs(e.left)*2,c.abs(e.top)*2):b,d.scrollTo(e.left,e.top,b)},scrollToPage:function(a,b,c){var d=this,e,f;c=c===undefined?400:c,d.options.onScrollStart&&d.options.onScrollStart.call(d),d.options.snap?(a=a=="next"?d.currPageX+1:a=="prev"?d.currPageX-1:a,b=b=="next"?d.currPageY+1:b=="prev"?d.currPageY-1:b,a=a<0?0:a>d.pagesX.length-1?d.pagesX.length-1:a,b=b<0?0:b>d.pagesY.length-1?d.pagesY.length-1:b,d.currPageX=a,d.currPageY=b,e=d.pagesX[a],f=d.pagesY[b]):(e=-d.wrapperW*a,f=-d.wrapperH*b,e<d.maxScrollX&&(e=d.maxScrollX),f<d.maxScrollY&&(f=d.maxScrollY)),d.scrollTo(e,f,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(v,a),this._unbind(w,a),this._unbind(x,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(z):B(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;if(!e.options.useTransform)return;e.zoomed=!0,d=d===undefined?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[i]=d+"ms",e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+C,e.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},d=null,D}(window,document)}),define("src/point",[],function(){var a=function(a,b,c){this.set(a,b,c)};return a.prototype={clone:function(){return new a(this.x,this.y,this.isUp)},equals:function(b){return a.equals(this,b)},dist:function(b){return a.dist(this,b)},interp:function(b,c){return a.interp(this,b,c)},set:function(a,b,c){this.x=a,this.y=b,this.isUp=c||!1},set_from_point:function(a){this.set(a.x,a.y,a.isUp)}},a.equals=function(a,b){return a===b?!0:a.x===b.x&&a.y===b.y&&a.isUp===b.isUp},a.dist2=function(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d},a.dist=function(b,c){return Math.sqrt(a.dist2(b,c))},a.interp=function(b,c,d,e){var f=b.x+d*(c.x-b.x),g=b.y+d*(c.y-b.y),h=e||new a;return h.set(f,g,c.isUp),h},a}),define("src/slider",[],function(){function s(a){function W(a){if(d&&!a)return;try{f(S,"mouseover",be),f(S,"mouseout",bf),f(S,"mousedown",bk),f(S,"touchstart",bk),f(U,"focus",_),f(U,"blur",ba),window.opera?f(U,"keypress",bd):(f(U,"keydown",bd),f(U,"keypress",bc)),f(U,"mousedown",bh),f(U,"touchstart",bh),f(U,"mouseup",bg),f(U,"touchend",bg),f(U,"touchcancel",bg),c&&!x&&(window.addEventListener&&!window.devicePixelRatio?window.removeEventListener("DOMMouseScroll",bb,!1):(f(document,"mousewheel",bb),f(window,"mousewheel",bb)))}catch(e){}clearTimeout(y),S.classList.add("slider-disabled"),S.setAttribute("aria-disabled",!0),b.disabled=d=!0,a||$("disable")}function X(a){if(!d&&!a)return;e(S,"mouseover",be),e(S,"mouseout",bf),e(S,"mousedown",bk),e(S,"touchstart",bk),window.opera?e(U,"keypress",bd):(e(U,"keydown",bd),e(U,"keypress",bc)),e(U,"focus",_),e(U,"blur",ba),e(U,"mousedown",bh),e(U,"touchstart",bh),e(U,"mouseup",bg),e(U,"touchend",bg),e(U,"touchcancel",bg),S.classList.remove("slider-disabled"),S.setAttribute("aria-disabled",!1),b.disabled=d=!1,a||$("enable")}function Y(){try{W(),S.parentNode.removeChild(S)}catch(a){}T=V=U=S=y=null,$("destroy"),v=null}function Z(){bn();try{var a=S.offsetWidth,b=S.offsetHeight,c=U.offsetWidth,d=U.offsetHeight,e=V.offsetHeight,f=V.offsetWidth;J=u?b-d:a-c,O=J/o,N=J/Math.ceil(k/m),B=a,A=b,bs()}catch(g){}$("redraw")}function $(a){var c={elem:b,value:h=="select"?b.options[b.selectedIndex].value:b.value};if(a in v)for(var d=0,e;e=v[a][d];d++)e(c)}function _(a){S.classList.add("focused"),c&&!x&&(e(window,"DOMMouseScroll",bb),e(document,"mousewheel",bb),window.opera||e(window,"mousewheel",bb)),$("focus")}function ba(a){S.classList.remove("focused"),S.classList.remove("fd-fc-slider-hover"),S.classList.remove("fd-slider-hover"),c&&!x&&(f(document,"mousewheel",bb),f(window,"DOMMouseScroll",bb),window.opera||f(window,"mousewheel",bb)),$("blur")}function bb(a){if(!z)return;a=a||window.event;var b=0;a.wheelDelta?(b=a.wheelDelta/120,window.opera&&window.opera.version()<9.2&&(b=-b)):a.detail&&(b=-a.detail/3),u&&(b=-b);if(b){var c=u?U.offsetTop:U.offsetLeft;c=b<0?Math.ceil(c+N):Math.floor(c-N),br(Math.min(Math.max(c,0),J))}return g(a)}function bc(a){return a=a||document.parentWindow.event,a.keyCode>=33&&a.keyCode<=40||!z||a.keyCode==45||a.keyCode==46?g(a):!0}function bd(a){if(!z)return!0;a=a||document.parentWindow.event;var c=a.keyCode!=null?a.keyCode:a.charCode;if(c<33||c>40&&c!=45&&c!=46)return!0;var d=h=="input"?parseFloat(b.value):b.selectedIndex;if(isNaN(d)||d<Math.min(i,j))d=Math.min(i,j);return c==37||c==40||c==46||c==34?d-=a.ctrlKey||c==34?m:l:c==39||c==38||c==45||c==33?d+=a.ctrlKey||c==33?m:l:c==35?d=j:c==36&&(d=i),bs(d),$("update"),g(a)}function be(a){this.classList.add("fd-slider-hover")}function bf(a){this.classList.remove("fd-slider-hover")}function bg(a){a=a||window.event,a.type==="mouseup"?(f(document,"mousemove",bj),f(document,"mouseup",bg)):(f(document,"touchmove",bj),f(document,"touchend",bg),f(document,"touchcancel",bg)),z=!0;if(window.opera)try{setTimeout(function(){onfocus()},0)}catch(b){}return document.body.classList.remove("slider-drag-vertical"),document.body.classList.remove("slider-drag-horizontal"),g(a)}function bh(a){a=a||window.event;if(a.touches){if(a.touches.length===0)return;a=r(a)}M=u?a.clientY:a.clientX,K=parseInt(u?U.offsetTop:U.offsetLeft)||0,z=!1,clearTimeout(y),y=null,a.type==="mousedown"?(e(document,"mousemove",bj),e(document,"mouseup",bg)):(e(document,"touchmove",bj),e(document,"touchend",bg),e(document,"touchcancel",bg));if(window.devicePixelRatio||document.all&&!window.opera)try{setTimeout(function(){U.focus()},0)}catch(b){}document.body.classList.add("slider-drag-"+(u?"vertical":"horizontal"))}function bi(a){return a=a||window.event,a.type==="mouseup"?f(document,"mouseup",bi):(f(document,"touchend",bi),f(document,"touchcancel",bi)),p||(clearTimeout(y),y=null,z=!0),g(a)}function bj(a){a=a||window.event;if(a.touches){if(a.touches.length===0)return;a=r(a)}br(bm(K+(u?a.clientY-M:a.clientX-M)))}function bk(a){a=a||window.event;if(a.touches){a.type==="touchstart"&&a.preventDefault();if(a.touches.length===0)return;a=r(a)}var b;a.target?b=a.target:a.srcElement&&(b=a.srcElement),b.nodeType==3&&(b=b.parentNode);if(b.className.search("fd-slider-handle")!=-1)return!0;try{setTimeout(function(){U.focus()},0)}catch(c){}clearTimeout(y),bn(),y=null,z=!1;var d=0,f=0,g=0;document.documentElement&&document.documentElement.scrollTop?(g=document.documentElement.scrollTop,f=document.documentElement.scrollLeft):document.body&&(g=document.body.scrollTop,f=document.body.scrollLeft),a.pageX?d=u?a.pageY:a.pageX:a.clientX&&(d=u?a.clientY+g:a.clientX+f),d-=u?I+Math.round(U.offsetHeight/2):H+Math.round(U.offsetWidth/2),d=bm(d),p?bq(d):t?(br(d),bh(a)):(a.type==="mousedown"?e(document,"mouseup",bi):(e(document,"touchend",bi),e(document,"touchcancel",bi)),L=d,bo())}function bl(a){var c=h=="input"?parseFloat(b.value):b.selectedIndex;if(isNaN(c)||c<Math.min(i,j))c=Math.min(i,j);c+=l*a,bs(c)}function bm(a){var b=a%O;return b&&b>=O/2?a+=O-b:a-=b,Math.min(Math.max(parseInt(a,10),0),J)}function bn(){var a=0,b=0,c=S;if(c.getBoundingClientRect){var d=c.getBoundingClientRect();H=d.left+document.body.scrollLeft,I=d.top+document.body.scrollTop;return}try{while(c.offsetParent)a+=c.offsetLeft,b+=c.offsetTop,c=c.offsetParent}catch(e){}H=a,I=b}function bo(){var a=u?U.offsetTop:U.offsetLeft;a=Math.round(L<a?Math.max(L,Math.floor(a-N)):Math.min(L,Math.ceil(a+N))),br(a),a!=L?y=setTimeout(bo,o>20?50:100):z=!0}function bq(a){z=!1,C=parseInt(a,10),D=parseInt(u?U.style.top:U.style.left,10),E=C-D,F=20,G=0,y||(y=setTimeout(bp,20))}function br(a){U.style[u?"top":"left"]=a+"px";var b=i+Math.round(a/O)*l;bt(h=="select"||l==1?Math.round(b):b)}function bs(a){var c=isNaN(a)?h=="input"?parseFloat(b.value):b.selectedIndex:a;isNaN(c)||c<Math.min(i,j)?c=Math.min(i,j):c>Math.max(i,j)&&(c=Math.max(i,j)),bt(c),U.style[u?"top":"left"]=Math.round((c-i)/l*O)+"px"}function bt(a){a=isNaN(a)?i:a;if(h=="select")try{a=parseInt(a,10);if(b.selectedIndex==a)return;b.options[a].selected=!0}catch(c){}else{a=(i+Math.round((a-i)/l)*l).toFixed(n);if(b.value==a)return;b.value=a}bv(),$("update")}function bu(){var a;if(b.parentNode&&b.parentNode.tagName.toLowerCase()=="label")a=b.parentNode;else{var c=document.getElementsByTagName("label");for(var d=0,e;e=c[d];d++)if(e.htmlFor&&e["htmlFor"]==b.id||e.getAttribute("for")==b.id){a=e;break}}return a&&!a.id&&(a.id=b.id+"_label"),a}function bv(){U.setAttribute("aria-valuenow",h=="select"?b.options[b.selectedIndex].value:b.value),U.setAttribute("aria-valuetext",h=="select"?b.options[b.selectedIndex].text:b.value)}function bw(a){return bs(),$("update"),!0}var b=a.inp,d=!1,h=b.tagName.toLowerCase(),i=+a.range[0],j=+a.range[1],k=Math.abs(j-i),l=h=="select"?1:+a.inc||1,m=a.maxInc?a.maxInc:l*2,n=a.inc.search(".")!=-1?a.inc.substr(a.inc.indexOf(".")+1,a.inc.length-1).length:0,o=Math.ceil(k/l),p=!!a.tween,q=!!a.fullARIA,s=!!a.hideInput,t=p?!1:!!a.clickJump,u=!!a.vertical,v=a.callbacks,w=a.classNames||"",x=!!a.noMouseWheel,y=null,z=!0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=this,Q={},R=null,S,T,U,V;j<i&&(l=-l,m=-m);var bp=function(){G++;var a=E,b=20,c=G,d=D,e=Math.ceil(c==b?d+a:a*(-Math.pow(2,-10*c/b)+1)+d);br(c==b?C:e),$("move"),c!=b?y=setTimeout(bp,20):(clearTimeout(y),y=null,z=!0)};return function(){s?b.classList.add("fd_hide_slider_input"):e(b,"change",bw),S=document.createElement("div"),S.className="fd-slider"+(u?"-vertical ":" ")+w,S.id="fd-slider-"+b.id,T=document.createElement("span"),T.className="fd-slider-inner",V=document.createElement("span"),V.className="fd-slider-bar",q?(U=document.createElement("span"),U.setAttribute("tabIndex","0")):(U=document.createElement("button"),U.setAttribute("type","button")),U.className="fd-slider-handle",U.appendChild(document.createTextNode(String.fromCharCode(160))),S.appendChild(T),S.appendChild(V),S.appendChild(U),b.parentNode.insertBefore(S,b),U.setAttribute("role","slider"),U.setAttribute("aria-valuemin",i),U.setAttribute("aria-valuemax",j);var a=bu();a&&(U.setAttribute("aria-labelledby",a.id),U.id="fd-slider-handle-"+b.id,a.setAttribute("for",U.id)),document.getElementById("fd_slider_describedby")&&U.setAttribute("aria-describedby","fd_slider_describedby"),b.getAttribute("disabled")==1?W(!0):X(!0),bv(),$("create"),Z()}(),{onResize:function(a){(S.offsetHeight!=A||S.offsetWidth!=B)&&Z()},destroy:function(){Y()},reset:function(){bs()},increment:function(a){bl(a)},disable:function(){W()},enable:function(){X()}}}function t(){e(window,"load",l),e(window,"unload",o),e(window,"resize",p)}var a={},b=0,c=!0,d=function(){c=!1},e=function(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!0)},f=function(a,b,c){if(a.detachEvent)try{a.detachEvent("on"+b,a[b+c]),a[b+c]=null}catch(d){}else a.removeEventListener(b,c,!0)},g=function(a){return a==null&&(a=document.parentWindow.event),a.stopPropagation&&(a.stopPropagation(),a.preventDefault()),!1},h=function(){if(!arguments.length)return[];var a=[];for(var b=0;b<arguments.length;b++)for(var c=0,d;d=arguments[b][c];c++)a[a.length]=d;return a},i=function(a){if(a==null)return{};var b,c,d={},e,f;for(var g=0,h;h=a[g];g++){c=h.match(/(fd_slider_cb_(update|create|destroy|redraw|move|focus|blur|enable|disable)_)([^\s|$]+)/i)[1],h=h.replace(new RegExp("^"+c),"").replace(/-/g,"."),c=c.replace(/^fd_slider_cb_/i,"").replace(/_$/,"");try{if(h.indexOf(".")!=-1){e=h.split("."),f=window;for(var i=0,j;j=f[e[i]];i++)j instanceof Function?function(){var a=j;b=function(b){a.apply(f,[b])}}():f=j}else b=window[h];if(b instanceof Function)c in d||(d[c]=[]),d[c][d[c].length]=b;else continue}catch(k){}}return d},j=function(a){if(a==null)return"";var b=[];for(var c=0,d;d=a[c];c++)b[b.length]=d.replace(/^fd_slider_cn_/,"");return b.join(" ")},k=function(b){return!b||!b.inp||!b.inp.id?!1:(m(b.inp.id),a[b.inp.id]=new s(b),!0)},l=function(a){var c=/fd_range_([-]{0,1}[0-9]+(d[0-9]+){0,1}){1}_([-]{0,1}[0-9]+(d[0-9]+){0,1}){1}/i,d=/fd_inc_([-]{0,1}[0-9]+(d[0-9]+){0,1}){1}/,e=/fd_maxinc_([-]{0,1}[0-9]+(d[0-9]+){0,1}){1}/,f=/((fd_slider_cb_(update|create|destroy|redraw|move|focus|blur|enable|disable)_)([^\s|$]+))/ig,g=/(fd_slider_cn_([a-zA-Z0-9_\-]+))/ig,l=a&&a.tagName&&a.tagName.search(/input|select/i)!=-1?[a]:h(document.getElementsByTagName("input"),document.getElementsByTagName("select")),m,n,o;for(var p=0,q;q=l[p];p++)if(q.tagName.toLowerCase()=="input"&&q.type=="text"&&(q.className.search(c)!=-1||q.className.search(/fd_slider/)!=-1)||q.tagName.toLowerCase()=="select"&&q.className.search(/fd_slider/)!=-1){if(!a&&q.id&&document.getElementById("fd-slider-"+q.id))continue;q.id||q.id=="sldr"+b++,o={inp:q,inc:q.className.search(d)!=-1?q.className.match(d)[0].replace("fd_inc_","").replace("d","."):"1",maxInc:q.className.search(e)!=-1?q.className.match(e)[0].replace("fd_maxinc_","").replace("d","."):!1,range:[0,100],callbacks:i(q.className.match(f)),classNames:j(q.className.match(g)),tween:q.className.search(/fd_tween/i)!=-1,vertical:q.className.search(/fd_vertical/i)!=-1,hideInput:q.className.search(/fd_hide_input/i)!=-1,clickJump:q.className.search(/fd_jump/i)!=-1,fullARIA:q.className.search(/fd_full_aria/i)!=-1,noMouseWheel:q.className.search(/fd_disable_mousewheel/i)!=-1},q.tagName.toLowerCase()=="select"?o.range=[0,q.options.length-1]:q.className.search(c)!=-1&&(m=q.className.match(c)[0].replace("fd_range_","").replace(/d/g,".").split("_"),o.range=[m[0],m[1]]),k(o)}return!0},m=function(b){return b in a?(a[b].destroy(),delete a[b],!0):!1},n=function(b){for(slider in a)a[slider].destroy()},o=function(b){n(),a=null,f(window,"unload",o),f(window,"resize",p),q()},p=function(b){for(slider in a)a[slider].onResize()},q=function(){f(window,"load",l)},r=function(a){return{type:a.type,pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,clientX:a.touches[0].clientX,clientY:a.touches[0].clientY,target:a.touches[0].target||a.target||a.srcElement}};return{create:function(a){l(a)},createSlider:function(a){k(a)},destroyAll:function(){n()},destroySlider:function(a){return m(a)},redrawAll:function(){p()},increment:function(b,c){if(b in a)a[b].increment(c);else return!1},addEvent:e,removeEvent:f,stopEvent:g,updateSlider:function(b){if(b in a)a[b].reset();else return!1},disableMouseWheel:function(){d()},addOnLoadEvent:t,removeOnLoadEvent:q,disableSlider:function(b){if(b in a)a[b].disable();else return!1},enableSlider:function(b){if(b in a)a[b].enable();else return!1}}}),define("src/color-x11",[],function(){var a=function(a){return{snow:new a(255,250,250,255),"ghost white":new a(248,248,255,255),GhostWhite:new a(248,248,255,255),"white smoke":new a(245,245,245,255),WhiteSmoke:new a(245,245,245,255),gainsboro:new a(220,220,220,255),"floral white":new a(255,250,240,255),FloralWhite:new a(255,250,240,255),"old lace":new a(253,245,230,255),OldLace:new a(253,245,230,255),linen:new a(250,240,230,255),"antique white":new a(250,235,215,255),AntiqueWhite:new a(250,235,215,255),"papaya whip":new a(255,239,213,255),PapayaWhip:new a(255,239,213,255),"blanched almond":new a(255,235,205,255),BlanchedAlmond:new a(255,235,205,255),bisque:new a(255,228,196,255),"peach puff":new a(255,218,185,255),PeachPuff:new a(255,218,185,255),"navajo white":new a(255,222,173,255),NavajoWhite:new a(255,222,173,255),moccasin:new a(255,228,181,255),cornsilk:new a(255,248,220,255),ivory:new a(255,255,240,255),"lemon chiffon":new a(255,250,205,255),LemonChiffon:new a(255,250,205,255),seashell:new a(255,245,238,255),honeydew:new a(240,255,240,255),"mint cream":new a(245,255,250,255),MintCream:new a(245,255,250,255),azure:new a(240,255,255,255),"alice blue":new a(240,248,255,255),AliceBlue:new a(240,248,255,255),lavender:new a(230,230,250,255),"lavender blush":new a(255,240,245,255),LavenderBlush:new a(255,240,245,255),"misty rose":new a(255,228,225,255),MistyRose:new a(255,228,225,255),white:new a(255,255,255,255),black:new a(0,0,0,255),"dark slate gray":new a(47,79,79,255),DarkSlateGray:new a(47,79,79,255),"dark slate grey":new a(47,79,79,255),DarkSlateGrey:new a(47,79,79,255),"dim gray":new a(105,105,105,255),DimGray:new a(105,105,105,255),"dim grey":new a(105,105,105,255),DimGrey:new a(105,105,105,255),"slate gray":new a(112,128,144,255),SlateGray:new a(112,128,144,255),"slate grey":new a(112,128,144,255),SlateGrey:new a(112,128,144,255),"light slate gray":new a(119,136,153,255),LightSlateGray:new a(119,136,153,255),"light slate grey":new a(119,136,153,255),LightSlateGrey:new a(119,136,153,255),gray:new a(190,190,190,255),grey:new a(190,190,190,255),"light grey":new a(211,211,211,255),LightGrey:new a(211,211,211,255),"light gray":new a(211,211,211,255),LightGray:new a(211,211,211,255),"midnight blue":new a(25,25,112,255),MidnightBlue:new a(25,25,112,255),navy:new a(0,0,128,255),"navy blue":new a(0,0,128,255),NavyBlue:new a(0,0,128,255),"cornflower blue":new a(100,149,237,255),CornflowerBlue:new a(100,149,237,255),"dark slate blue":new a(72,61,139,255),DarkSlateBlue:new a(72,61,139,255),"slate blue":new a(106,90,205,255),SlateBlue:new a(106,90,205,255),"medium slate blue":new a(123,104,238,255),MediumSlateBlue:new a(123,104,238,255),"light slate blue":new a(132,112,255,255),LightSlateBlue:new a(132,112,255,255),"medium blue":new a(0,0,205,255),MediumBlue:new a(0,0,205,255),"royal blue":new a(65,105,225,255),RoyalBlue:new a(65,105,225,255),blue:new a(0,0,255,255),"dodger blue":new a(30,144,255,255),DodgerBlue:new a(30,144,255,255),"deep sky blue":new a(0,191,255,255),DeepSkyBlue:new a(0,191,255,255),"sky blue":new a(135,206,235,255),SkyBlue:new a(135,206,235,255),"light sky blue":new a(135,206,250,255),LightSkyBlue:new a(135,206,250,255),"steel blue":new a(70,130,180,255),SteelBlue:new a(70,130,180,255),"light steel blue":new a(176,196,222,255),LightSteelBlue:new a(176,196,222,255),"light blue":new a(173,216,230,255),LightBlue:new a(173,216,230,255),"powder blue":new a(176,224,230,255),PowderBlue:new a(176,224,230,255),"pale turquoise":new a(175,238,238,255),PaleTurquoise:new a(175,238,238,255),"dark turquoise":new a(0,206,209,255),DarkTurquoise:new a(0,206,209,255),"medium turquoise":new a(72,209,204,255),MediumTurquoise:new a(72,209,204,255),turquoise:new a(64,224,208,255),cyan:new a(0,255,255,255),"light cyan":new a(224,255,255,255),LightCyan:new a(224,255,255,255),"cadet blue":new a(95,158,160,255),CadetBlue:new a(95,158,160,255),"medium aquamarine":new a(102,205,170,255),MediumAquamarine:new a(102,205,170,255),aquamarine:new a(127,255,212,255),"dark green":new a(0,100,0,255),DarkGreen:new a(0,100,0,255),"dark olive green":new a(85,107,47,255),DarkOliveGreen:new a(85,107,47,255),"dark sea green":new a(143,188,143,255),DarkSeaGreen:new a(143,188,143,255),"sea green":new a(46,139,87,255),SeaGreen:new a(46,139,87,255),"medium sea green":new a(60,179,113,255),MediumSeaGreen:new a(60,179,113,255),"light sea green":new a(32,178,170,255),LightSeaGreen:new a(32,178,170,255),"pale green":new a(152,251,152,255),PaleGreen:new a(152,251,152,255),"spring green":new a(0,255,127,255),SpringGreen:new a(0,255,127,255),"lawn green":new a(124,252,0,255),LawnGreen:new a(124,252,0,255),green:new a(0,255,0,255),chartreuse:new a(127,255,0,255),"medium spring green":new a(0,250,154,255),MediumSpringGreen:new a(0,250,154,255),"green yellow":new a(173,255,47,255),GreenYellow:new a(173,255,47,255),"lime green":new a(50,205,50,255),LimeGreen:new a(50,205,50,255),"yellow green":new a(154,205,50,255),YellowGreen:new a(154,205,50,255),"forest green":new a(34,139,34,255),ForestGreen:new a(34,139,34,255),"olive drab":new a(107,142,35,255),OliveDrab:new a(107,142,35,255),"dark khaki":new a(189,183,107,255),DarkKhaki:new a(189,183,107,255),khaki:new a(240,230,140,255),"pale goldenrod":new a(238,232,170,255),PaleGoldenrod:new a(238,232,170,255),"light goldenrod yellow":new a(250,250,210,255),LightGoldenrodYellow:new a(250,250,210,255),"light yellow":new a(255,255,224,255),LightYellow:new a(255,255,224,255),yellow:new a(255,255,0,255),gold:new a(255,215,0,255),"light goldenrod":new a(238,221,130,255),LightGoldenrod:new a(238,221,130,255),goldenrod:new a(218,165,32,255),"dark goldenrod":new a(184,134,11,255),DarkGoldenrod:new a(184,134,11,255),"rosy brown":new a(188,143,143,255),RosyBrown:new a(188,143,143,255),"indian red":new a(205,92,92,255),IndianRed:new a(205,92,92,255),"saddle brown":new a(139,69,19,255),SaddleBrown:new a(139,69,19,255),sienna:new a(160,82,45,255),peru:new a(205,133,63,255),burlywood:new a(222,184,135,255),beige:new a(245,245,220,255),wheat:new a(245,222,179,255),"sandy brown":new a(244,164,96,255),SandyBrown:new a(244,164,96,255),tan:new a(210,180,140,255),chocolate:new a(210,105,30,255),firebrick:new a(178,34,34,255),brown:new a(165,42,42,255),"dark salmon":new a(233,150,122,255),DarkSalmon:new a(233,150,122,255),salmon:new a(250,128,114,255),"light salmon":new a(255,160,122,255),LightSalmon:new a(255,160,122,255),orange:new a(255,165,0,255),"dark orange":new a(255,140,0,255),DarkOrange:new a(255,140,0,255),coral:new a(255,127,80,255),"light coral":new a(240,128,128,255),LightCoral:new a(240,128,128,255),tomato:new a(255,99,71,255),"orange red":new a(255,69,0,255),OrangeRed:new a(255,69,0,255),red:new a(255,0,0,255),"hot pink":new a(255,105,180,255),HotPink:new a(255,105,180,255),"deep pink":new a(255,20,147,255),DeepPink:new a(255,20,147,255),pink:new a(255,192,203,255),"light pink":new a(255,182,193,255),LightPink:new a(255,182,193,255),"pale violet red":new a(219,112,147,255),PaleVioletRed:new a(219,112,147,255),maroon:new a(176,48,96,255),"medium violet red":new a(199,21,133,255),MediumVioletRed:new a(199,21,133,255),"violet red":new a(208,32,144,255),VioletRed:new a(208,32,144,255),magenta:new a(255,0,255,255),violet:new a(238,130,238,255),plum:new a(221,160,221,255),orchid:new a(218,112,214,255),"medium orchid":new a(186,85,211,255),MediumOrchid:new a(186,85,211,255),"dark orchid":new a(153,50,204,255),DarkOrchid:new a(153,50,204,255),"dark violet":new a(148,0,211,255),DarkViolet:new a(148,0,211,255),"blue violet":new a(138,43,226,255),BlueViolet:new a(138,43,226,255),purple:new a(160,32,240,255),"medium purple":new a(147,112,219,255),MediumPurple:new a(147,112,219,255),thistle:new a(216,191,216,255),snow1:new a(255,250,250,255),snow2:new a(238,233,233,255),snow3:new a(205,201,201,255),snow4:new a(139,137,137,255),seashell1:new a(255,245,238,255),seashell2:new a(238,229,222,255),seashell3:new a(205,197,191,255),seashell4:new a(139,134,130,255),AntiqueWhite1:new a(255,239,219,255),AntiqueWhite2:new a(238,223,204,255),AntiqueWhite3:new a(205,192,176,255),AntiqueWhite4:new a(139,131,120,255),bisque1:new a(255,228,196,255),bisque2:new a(238,213,183,255),bisque3:new a(205,183,158,255),bisque4:new a(139,125,107,255),PeachPuff1:new a(255,218,185,255),PeachPuff2:new a(238,203,173,255),PeachPuff3:new a(205,175,149,255),PeachPuff4:new a(139,119,101,255),NavajoWhite1:new a(255,222,173,255),NavajoWhite2:new a(238,207,161,255),NavajoWhite3:new a(205,179,139,255),NavajoWhite4:new a(139,121,94,255),LemonChiffon1:new a(255,250,205,255),LemonChiffon2:new a(238,233,191,255),LemonChiffon3:new a(205,201,165,255),LemonChiffon4:new a(139,137,112,255),cornsilk1:new a(255,248,220,255),cornsilk2:new a(238,232,205,255),cornsilk3:new a(205,200,177,255),cornsilk4:new a(139,136,120,255),ivory1:new a(255,255,240,255),ivory2:new a(238,238,224,255),ivory3:new a(205,205,193,255),ivory4:new a(139,139,131,255),honeydew1:new a(240,255,240,255),honeydew2:new a(224,238,224,255),honeydew3:new a(193,205,193,255),honeydew4:new a(131,139,131,255),LavenderBlush1:new a(255,240,245,255),LavenderBlush2:new a(238,224,229,255),LavenderBlush3:new a(205,193,197,255),LavenderBlush4:new a(139,131,134,255),MistyRose1:new a(255,228,225,255),MistyRose2:new a(238,213,210,255),MistyRose3:new a(205,183,181,255),MistyRose4:new a(139,125,123,255),azure1:new a(240,255,255,255),azure2:new a(224,238,238,255),azure3:new a(193,205,205,255),azure4:new a(131,139,139,255),SlateBlue1:new a(131,111,255,255),SlateBlue2:new a(122,103,238,255),SlateBlue3:new a(105,89,205,255),SlateBlue4:new a(71,60,139,255),RoyalBlue1:new a(72,118,255,255),RoyalBlue2:new a(67,110,238,255),RoyalBlue3:new a(58,95,205,255),RoyalBlue4:new a(39,64,139,255),blue1:new a(0,0,255,255),blue2:new a(0,0,238,255),blue3:new a(0,0,205,255),blue4:new a(0,0,139,255),DodgerBlue1:new a(30,144,255,255),DodgerBlue2:new a(28,134,238,255),DodgerBlue3:new a(24,116,205,255),DodgerBlue4:new a(16,78,139,255),SteelBlue1:new a(99,184,255,255),SteelBlue2:new a(92,172,238,255),SteelBlue3:new a(79,148,205,255),SteelBlue4:new a(54,100,139,255),DeepSkyBlue1:new a(0,191,255,255),DeepSkyBlue2:new a(0,178,238,255),DeepSkyBlue3:new a(0,154,205,255),DeepSkyBlue4:new a(0,104,139,255),SkyBlue1:new a(135,206,255,255),SkyBlue2:new a(126,192,238,255),SkyBlue3:new a(108,166,205,255),SkyBlue4:new a(74,112,139,255),LightSkyBlue1:new a(176,226,255,255),LightSkyBlue2:new a(164,211,238,255),LightSkyBlue3:new a(141,182,205,255),LightSkyBlue4:new a(96,123,139,255),SlateGray1:new a(198,226,255,255),SlateGray2:new a(185,211,238,255),SlateGray3:new a(159,182,205,255),SlateGray4:new a(108,123,139,255),LightSteelBlue1:new a(202,225,255,255),LightSteelBlue2:new a(188,210,238,255),LightSteelBlue3:new a(162,181,205,255),LightSteelBlue4:new a(110,123,139,255),LightBlue1:new a(191,239,255,255),LightBlue2:new a(178,223,238,255),LightBlue3:new a(154,192,205,255),LightBlue4:new a(104,131,139,255),LightCyan1:new a(224,255,255,255),LightCyan2:new a(209,238,238,255),LightCyan3:new a(180,205,205,255),LightCyan4:new a(122,139,139,255),PaleTurquoise1:new a(187,255,255,255),PaleTurquoise2:new a(174,238,238,255),PaleTurquoise3:new a(150,205,205,255),PaleTurquoise4:new a(102,139,139,255),CadetBlue1:new a(152,245,255,255),CadetBlue2:new a(142,229,238,255),CadetBlue3:new a(122,197,205,255),CadetBlue4:new a(83,134,139,255),turquoise1:new a(0,245,255,255),turquoise2:new a(0,229,238,255),turquoise3:new a(0,197,205,255),turquoise4:new a(0,134,139,255),cyan1:new a(0,255,255,255),cyan2:new a(0,238,238,255),cyan3:new a(0,205,205,255),cyan4:new a(0,139,139,255),DarkSlateGray1:new a(151,255,255,255),DarkSlateGray2:new a(141,238,238,255),DarkSlateGray3:new a(121,205,205,255),DarkSlateGray4:new a(82,139,139,255),aquamarine1:new a(127,255,212,255),aquamarine2:new a(118,238,198,255),aquamarine3:new a(102,205,170,255),aquamarine4:new a(69,139,116,255),DarkSeaGreen1:new a(193,255,193,255),DarkSeaGreen2:new a(180,238,180,255),DarkSeaGreen3:new a(155,205,155,255),DarkSeaGreen4:new a(105,139,105,255),SeaGreen1:new a(84,255,159,255),SeaGreen2:new a(78,238,148,255),SeaGreen3:new a(67,205,128,255),SeaGreen4:new a(46,139,87,255),PaleGreen1:new a(154,255,154,255),PaleGreen2:new a(144,238,144,255),PaleGreen3:new a(124,205,124,255),PaleGreen4:new a(84,139,84,255),SpringGreen1:new a(0,255,127,255),SpringGreen2:new a(0,238,118,255),SpringGreen3:new a(0,205,102,255),SpringGreen4:new a(0,139,69,255),green1:new a(0,255,0,255),green2:new a(0,238,0,255),green3:new a(0,205,0,255),green4:new a(0,139,0,255),chartreuse1:new a(127,255,0,255),chartreuse2:new a(118,238,0,255),chartreuse3:new a(102,205,0,255),chartreuse4:new a(69,139,0,255),OliveDrab1:new a(192,255,62,255),OliveDrab2:new a(179,238,58,255),OliveDrab3:new a(154,205,50,255),OliveDrab4:new a(105,139,34,255),DarkOliveGreen1:new a(202,255,112,255),DarkOliveGreen2:new a(188,238,104,255),DarkOliveGreen3:new a(162,205,90,255),DarkOliveGreen4:new a(110,139,61,255),khaki1:new a(255,246,143,255),khaki2:new a(238,230,133,255),khaki3:new a(205,198,115,255),khaki4:new a(139,134,78,255),LightGoldenrod1:new a(255,236,139,255),LightGoldenrod2:new a(238,220,130,255),LightGoldenrod3:new a(205,190,112,255),LightGoldenrod4:new a(139,129,76,255),LightYellow1:new a(255,255,224,255),LightYellow2:new a(238,238,209,255),LightYellow3:new a(205,205,180,255),LightYellow4:new a(139,139,122,255),yellow1:new a(255,255,0,255),yellow2:new a(238,238,0,255),yellow3:new a(205,205,0,255),yellow4:new a(139,139,0,255),gold1:new a(255,215,0,255),gold2:new a(238,201,0,255),gold3:new a(205,173,0,255),gold4:new a(139,117,0,255),goldenrod1:new a(255,193,37,255),goldenrod2:new a(238,180,34,255),goldenrod3:new a(205,155,29,255),goldenrod4:new a(139,105,20,255),DarkGoldenrod1:new a(255,185,15,255),DarkGoldenrod2:new a(238,173,14,255),DarkGoldenrod3:new a(205,149,12,255),DarkGoldenrod4:new a(139,101,8,255),RosyBrown1:new a(255,193,193,255),RosyBrown2:new a(238,180,180,255),RosyBrown3:new a(205,155,155,255),RosyBrown4:new a(139,105,105,255),IndianRed1:new a(255,106,106,255),IndianRed2:new a(238,99,99,255),IndianRed3:new a(205,85,85,255),IndianRed4:new a(139,58,58,255),sienna1:new a(255,130,71,255),sienna2:new a(238,121,66,255),sienna3:new a(205,104,57,255),sienna4:new a(139,71,38,255),burlywood1:new a(255,211,155,255),burlywood2:new a(238,197,145,255),burlywood3:new a(205,170,125,255),burlywood4:new a(139,115,85,255),wheat1:new a(255,231,186,255),wheat2:new a(238,216,174,255),wheat3:new a(205,186,150,255),wheat4:new a(139,126,102,255),tan1:new a(255,165,79,255),tan2:new a(238,154,73,255),tan3:new a(205,133,63,255),tan4:new a(139,90,43,255),chocolate1:new a(255,127,36,255),chocolate2:new a(238,118,33,255),chocolate3:new a(205,102,29,255),chocolate4:new a(139,69,19,255),firebrick1:new a(255,48,48,255),firebrick2:new a(238,44,44,255),firebrick3:new a(205,38,38,255),firebrick4:new a(139,26,26,255),brown1:new a(255,64,64,255),brown2:new a(238,59,59,255),brown3:new a(205,51,51,255),brown4:new a(139,35,35,255),salmon1:new a(255,140,105,255),salmon2:new a(238,130,98,255),salmon3:new a(205,112,84,255),salmon4:new a(139,76,57,255),LightSalmon1:new a(255,160,122,255),LightSalmon2:new a(238,149,114,255),LightSalmon3:new a(205,129,98,255),LightSalmon4:new a(139,87,66,255),orange1:new a(255,165,0,255),orange2:new a(238,154,0,255),orange3:new a(205,133,0,255),orange4:new a(139,90,0,255),DarkOrange1:new a(255,127,0,255),DarkOrange2:new a(238,118,0,255),DarkOrange3:new a(205,102,0,255),DarkOrange4:new a(139,69,0,255),coral1:new a(255,114,86,255),coral2:new a(238,106,80,255),coral3:new a(205,91,69,255),coral4:new a(139,62,47,255),tomato1:new a(255,99,71,255),tomato2:new a(238,92,66,255),tomato3:new a(205,79,57,255),tomato4:new a(139,54,38,255),OrangeRed1:new a(255,69,0,255),OrangeRed2:new a(238,64,0,255),OrangeRed3:new a(205,55,0,255),OrangeRed4:new a(139,37,0,255),red1:new a(255,0,0,255),red2:new a(238,0,0,255),red3:new a(205,0,0,255),red4:new a(139,0,0,255),DebianRed:new a(215,7,81,255),DeepPink1:new a(255,20,147,255),DeepPink2:new a(238,18,137,255),DeepPink3:new a(205,16,118,255),DeepPink4:new a(139,10,80,255),HotPink1:new a(255,110,180,255),HotPink2:new a(238,106,167,255),HotPink3:new a(205,96,144,255),HotPink4:new a(139,58,98,255),pink1:new a(255,181,197,255),pink2:new a(238,169,184,255),pink3:new a(205,145,158,255),pink4:new a(139,99,108,255),LightPink1:new a(255,174,185,255),LightPink2:new a(238,162,173,255),LightPink3:new a(205,140,149,255),LightPink4:new a(139,95,101,255),PaleVioletRed1:new a(255,130,171,255),PaleVioletRed2:new a(238,121,159,255),PaleVioletRed3:new a(205,104,137,255),PaleVioletRed4:new a(139,71,93,255),maroon1:new a(255,52,179,255),maroon2:new a(238,48,167,255),maroon3:new a(205,41,144,255),maroon4:new a(139,28,98,255),VioletRed1:new a(255,62,150,255),VioletRed2:new a(238,58,140,255),VioletRed3:new a(205,50,120,255),VioletRed4:new a(139,34,82,255),magenta1:new a(255,0,255,255),magenta2:new a(238,0,238,255),magenta3:new a(205,0,205,255),magenta4:new a(139,0,139,255),orchid1:new a(255,131,250,255),orchid2:new a(238,122,233,255),orchid3:new a(205,105,201,255),orchid4:new a(139,71,137,255),plum1:new a(255,187,255,255),plum2:new a(238,174,238,255),plum3:new a(205,150,205,255),plum4:new a(139,102,139,255),MediumOrchid1:new a(224,102,255,255),MediumOrchid2:new a(209,95,238,255),MediumOrchid3:new a(180,82,205,255),MediumOrchid4:new a(122,55,139,255),DarkOrchid1:new a(191,62,255,255),DarkOrchid2:new a(178,58,238,255),DarkOrchid3:new a(154,50,205,255),DarkOrchid4:new a(104,34,139,255),purple1:new a(155,48,255,255),purple2:new a(145,44,238,255),purple3:new a(125,38,205,255),purple4:new a(85,26,139,255),MediumPurple1:new a(171,130,255,255),MediumPurple2:new a(159,121,238,255),MediumPurple3:new a(137,104,205,255),MediumPurple4:new a(93,71,139,255),thistle1:new a(255,225,255,255),thistle2:new a(238,210,238,255),thistle3:new a(205,181,205,255),thistle4:new a(139,123,139,255),gray0:new a(0,0,0,255),grey0:new a(0,0,0,255),gray1:new a(3,3,3,255),grey1:new a(3,3,3,255),gray2:new a(5,5,5,255),grey2:new a(5,5,5,255),gray3:new a(8,8,8,255),grey3:new a(8,8,8,255),gray4:new a(10,10,10,255),grey4:new a(10,10,10,255),gray5:new a(13,13,13,255),grey5:new a(13,13,13,255),gray6:new a(15,15,15,255),grey6:new a(15,15,15,255),gray7:new a(18,18,18,255),grey7:new a(18,18,18,255),gray8:new a(20,20,20,255),grey8:new a(20,20,20,255),gray9:new a(23,23,23,255),grey9:new a(23,23,23,255),gray10:new a(26,26,26,255),grey10:new a(26,26,26,255),gray11:new a(28,28,28,255),grey11:new a(28,28,28,255),gray12:new a(31,31,31,255),grey12:new a(31,31,31,255),gray13:new a(33,33,33,255),grey13:new a(33,33,33,255),gray14:new a(36,36,36,255),grey14:new a(36,36,36,255),gray15:new a(38,38,38,255),grey15:new a(38,38,38,255),gray16:new a(41,41,41,255),grey16:new a(41,41,41,255),gray17:new a(43,43,43,255),grey17:new a(43,43,43,255),gray18:new a(46,46,46,255),grey18:new a(46,46,46,255),gray19:new a(48,48,48,255),grey19:new a(48,48,48,255),gray20:new a(51,51,51,255),grey20:new a(51,51,51,255),gray21:new a(54,54,54,255),grey21:new a(54,54,54,255),gray22:new a(56,56,56,255),grey22:new a(56,56,56,255),gray23:new a(59,59,59,255),grey23:new a(59,59,59,255),gray24:new a(61,61,61,255),grey24:new a(61,61,61,255),gray25:new a(64,64,64,255),grey25:new a(64,64,64,255),gray26:new a(66,66,66,255),grey26:new a(66,66,66,255),gray27:new a(69,69,69,255),grey27:new a(69,69,69,255),gray28:new a(71,71,71,255),grey28:new a(71,71,71,255),gray29:new a(74,74,74,255),grey29:new a(74,74,74,255),gray30:new a(77,77,77,255),grey30:new a(77,77,77,255),gray31:new a(79,79,79,255),grey31:new a(79,79,79,255),gray32:new a(82,82,82,255),grey32:new a(82,82,82,255),gray33:new a(84,84,84,255),grey33:new a(84,84,84,255),gray34:new a(87,87,87,255),grey34:new a(87,87,87,255),gray35:new a(89,89,89,255),grey35:new a(89,89,89,255),gray36:new a(92,92,92,255),grey36:new a(92,92,92,255),gray37:new a(94,94,94,255),grey37:new a(94,94,94,255),gray38:new a(97,97,97,255),grey38:new a(97,97,97,255),gray39:new a(99,99,99,255),grey39:new a(99,99,99,255),gray40:new a(102,102,102,255),grey40:new a(102,102,102,255),gray41:new a(105,105,105,255),grey41:new a(105,105,105,255),gray42:new a(107,107,107,255),grey42:new a(107,107,107,255),gray43:new a(110,110,110,255),grey43:new a(110,110,110,255),gray44:new a(112,112,112,255),grey44:new a(112,112,112,255),gray45:new a(115,115,115,255),grey45:new a(115,115,115,255),gray46:new a(117,117,117,255),grey46:new a(117,117,117,255),gray47:new a(120,120,120,255),grey47:new a(120,120,120,255),gray48:new a(122,122,122,255),grey48:new a(122,122,122,255),gray49:new a(125,125,125,255),grey49:new a(125,125,125,255),gray50:new a(127,127,127,255),grey50:new a(127,127,127,255),gray51:new a(130,130,130,255),grey51:new a(130,130,130,255),gray52:new a(133,133,133,255),grey52:new a(133,133,133,255),gray53:new a(135,135,135,255),grey53:new a(135,135,135,255),gray54:new a(138,138,138,255),grey54:new a(138,138,138,255),gray55:new a(140,140,140,255),grey55:new a(140,140,140,255),gray56:new a(143,143,143,255),grey56:new a(143,143,143,255),gray57:new a(145,145,145,255),grey57:new a(145,145,145,255),gray58:new a(148,148,148,255),grey58:new a(148,148,148,255),gray59:new a(150,150,150,255),grey59:new a(150,150,150,255),gray60:new a(153,153,153,255),grey60:new a(153,153,153,255),gray61:new a(156,156,156,255),grey61:new a(156,156,156,255),gray62:new a(158,158,158,255),grey62:new a(158,158,158,255),gray63:new a(161,161,161,255),grey63:new a(161,161,161,255),gray64:new a(163,163,163,255),grey64:new a(163,163,163,255),gray65:new a(166,166,166,255),grey65:new a(166,166,166,255),gray66:new a(168,168,168,255),grey66:new a(168,168,168,255),gray67:new a(171,171,171,255),grey67:new a(171,171,171,255),gray68:new a(173,173,173,255),grey68:new a(173,173,173,255),gray69:new a(176,176,176,255),grey69:new a(176,176,176,255),gray70:new a(179,179,179,255),grey70:new a(179,179,179,255),gray71:new a(181,181,181,255),grey71:new a(181,181,181,255),gray72:new a(184,184,184,255),grey72:new a(184,184,184,255),gray73:new a(186,186,186,255),grey73:new a(186,186,186,255),gray74:new a(189,189,189,255),grey74:new a(189,189,189,255),gray75:new a(191,191,191,255),grey75:new a(191,191,191,255),gray76:new a(194,194,194,255),grey76:new a(194,194,194,255),gray77:new a(196,196,196,255),grey77:new a(196,196,196,255),gray78:new a(199,199,199,255),grey78:new a(199,199,199,255),gray79:new a(201,201,201,255),grey79:new a(201,201,201,255),gray80:new a(204,204,204,255),grey80:new a(204,204,204,255),gray81:new a(207,207,207,255),grey81:new a(207,207,207,255),gray82:new a(209,209,209,255),grey82:new a(209,209,209,255),gray83:new a(212,212,212,255),grey83:new a(212,212,212,255),gray84:new a(214,214,214,255),grey84:new a(214,214,214,255),gray85:new a(217,217,217,255),grey85:new a(217,217,217,255),gray86:new a(219,219,219,255),grey86:new a(219,219,219,255),gray87:new a(222,222,222,255),grey87:new a(222,222,222,255),gray88:new a(224,224,224,255),grey88:new a(224,224,224,255),gray89:new a(227,227,227,255),grey89:new a(227,227,227,255),gray90:new a(229,229,229,255),grey90:new a(229,229,229,255),gray91:new a(232,232,232,255),grey91:new a(232,232,232,255),gray92:new a(235,235,235,255),grey92:new a(235,235,235,255),gray93:new a(237,237,237,255),grey93:new a(237,237,237,255),gray94:new a(240,240,240,255),grey94:new a(240,240,240,255),gray95:new a(242,242,242,255),grey95:new a(242,242,242,255),gray96:new a(245,245,245,255),grey96:new a(245,245,245,255),gray97:new a(247,247,247,255),grey97:new a(247,247,247,255),gray98:new a(250,250,250,255),grey98:new a(250,250,250,255),gray99:new a(252,252,252,255),grey99:new a(252,252,252,255),gray100:new a(255,255,255,255),grey100:new a(255,255,255,255),"dark grey":new a(169,169,169,255),DarkGrey:new a(169,169,169,255),"dark gray":new a(169,169,169,255),DarkGray:new a(169,169,169,255),"dark blue":new a(0,0,139,255),DarkBlue:new a(0,0,139,255),"dark cyan":new a(0,139,139,255),DarkCyan:new a(0,139,139,255),"dark magenta":new a(139,0,139,255),DarkMagenta:new a(139,0,139,255),"dark red":new a(139,0,0,255),DarkRed:new a(139,0,0,255),"light green":new a(144,238,144,255),LightGreen:new a(144,238,144,255),indigo:new a(75,0,130,255)}};return{make_color_table:a}}),define("src/color",["./color-x11"],function(a){var b=function(a){return a<0?0:a>255?255:a},c=Math.max,d=Math.min,e=function(a,b,c,d){this.red=a,this.green=b,this.blue=c,this.alpha=d};e.prototype={copy:function(){return new e(this.red,this.green,this.blue,this.alpha)},set:function(a,b,c,d){this.red=a,this.green=b,this.blue=c,this.alpha=d},set_from_color:function(a){this.set(a.red,a.green,a.blue,a.alpha)},to_string:function(){function a(a){var b=a.toString(16);while(b.length<2)b="0"+b;return b}return"#"+a(this.red)+a(this.green)+a(this.blue)+a(this.alpha)},to_hls:function(){var a=this.red/255,b=this.green/255,e=this.blue/255,f=c(c(a,b),e),g=d(d(a,b),e),h=(f+g)/2,i=0,j=0;if(f!==g){h<=.5?i=(f-g)/(f+g):i=(f-g)/(2-f-g);var k=f-g;a===f?j=(b-e)/k:b===f?j=2+(e-a)/k:e===f&&(j=4+(a-b)/k),j*=60,j<0&&(j+=360)}return[j,h,i]},to_pixel:function(){return this.alpha|this.blue<<8|this.green<<16|this.red<<24},add:function(a){return e.add(this,a)},subtract:function(a){return e.subtract(this,a)},lighten:function(){return this.shade(1.3)},darken:function(){return this.shade(.7)},shade:function(a){var b,c=this.to_hls();c[1]*=a,c[2]*=a;for(b=1;b<3;b++)c[b]=c[b]>1?1:c[b]<0?0:c[b];return e.from_hls(c[0],c[1],c[2],this.alpha)}};var f=a.make_color_table(e),g=/\(\s*([\-+]?\d*\.?\d+)\s*(%\s*)?,\s*([\-+]?\d*\.?\d+)\s*(%\s*)?,\s*([\-+]?\d*\.?\d+)\s*(%\s*)?(,\s*([\-+]?\d*\.?\d+)\s*(%\s*)?)?\)/,h=function(a,c){var d=a.trim().match(g);if(!d)return null;var f=parseFloat(d[1]);d[2]&&(f=f/100*255);var h=parseFloat(d[3]);d[4]&&(h=h/100*255);var i=parseFloat(d[5]);d[6]&&(i=i/100*255);var j=255;if(c){if(!d[7])return null;j=parseFloat(d[8]),d[9]&&(j/=100),j*=255}return new e(b(Math.round(f)),b(Math.round(h)),b(Math.round(i)),b(Math.round(j)))},i=function(a,c){var d=a.trim().match(g);if(!d)return null;var f=parseFloat(d[1]);d[2]&&(f=f/100*360),f=f<0?0:f>360?360:f;var h=parseFloat(d[3]);d[4]&&(h/=100),h=h<0?0:h>1?1:h;var i=parseFloat(d[5]);d[6]&&(i/=100),i=i<0?0:i>1?1:i;var j=255;if(c){if(!d[7])return null;j=parseFloat(d[8]),d[9]&&(j/=100),j*=255}return j=b(Math.round(j)),e.from_hls(f,h,i,j)},j=function(a){var b,c,d,f,g=parseInt(a,16);return g!==g?null:a.length===8?e.from_pixel(g):a.length===6?e.from_pixel(g<<8|255):a.length===4?(b=g>>12&15,c=g>>8&15,d=g>>4&15,f=g&15,new e(b*17,c*17,d*17,f*17)):a.length===3?(b=g>>8&15,c=g>>4&15,d=g&15,new e(b*17,c*17,d*17,255)):null};return e.from_string=function(a){return a.substr(0,3)==="rgb"?a.substr(0,4)==="rgba"?h(a.substr(4),!0):h(a.substr(3),!1):a.substr(0,3)==="hsl"?a.substr(0,4)==="hsla"?i(a.substr(4),!0):i(a.substr(3),!1):a.substr(0,1)==="#"?j(a.substr(1)):a in f?f[a]:null},e.from_pixel=function(a){return new e(a>>24&255,a>>16&255,a>>8&255,a&255)},e.from_hls=function(a,b,c,d){d===undefined&&(d=255),a/=360;if(c===0){var f=b*255;return new e(f,f,f,d)}var g;b<=.5?g=b*(1+c):g=b+c-b*c;var h=2*b-g,i=[a+1/3,a,a-1/3],j=[0,0,0],k;for(k=0;k<3;k++)i[k]<0&&(i[k]+=1),i[k]>1&&(i[k]-=1),6*i[k]<1?j[k]=h+(g-h)*i[k]*6:2*i[k]<1?j[k]=g:3*i[k]<2?j[k]=h+(g-h)*(2/3-i[k])*6:j[k]=h;return new e(Math.round(j[0]*255),Math.round(j[1]*255),Math.round(j[2]*255),d)},e.equal=function(a,b){return a===b?!0:a.red===b.red&&a.green===b.green&&a.blue===b.blue&&a.alpha===b.alpha},e.add=function(a,d){return new e(b(a.red+d.red),b(a.green+d.green),b(a.blue+d.blue),c(a.alpha,d.alpha))},e.subtract=function(a,c){return new e(b(a.red-c.red),b(a.green-c.green),b(a.blue-c.blue),d(a.alpha,c.alpha))},e.interpolate=function(a,b,c){return new e(a.red+(b.red-a.red)*c,a.green+(b.green-a.green)*c,a.blue+(b.blue-a.blue)*c,a.alpha+(b.alpha-a.alpha)*c)},e.WHITE=e.from_string("#ffffffff"),e.BLACK=e.from_string("#000000ff"),e.RED=e.from_string("#ff0000ff"),e.DARK_RED=e.from_string("#800000ff"),e.GREEN=e.from_string("#00ff00ff"),e.DARK_GREEN=e.from_string("#008000ff"),e.BLUE=e.from_string("#0000ffff"),e.DARK_BLUE=e.from_string("#000080ff"),e.CYAN=e.from_string("#00ffffff"),e.DARK_CYAN=e.from_string("#008080ff"),e.MAGENTA=e.from_string("#ff00ffff"),e.DARK_MAGENTA=e.from_string("#800080ff"),e.YELLOW=e.from_string("#ffff00ff"),e.DARK_YELLOW=e.from_string("#808000ff"),e.GRAY=e.from_string("#a0a0a4ff"),e.DARK_GRAY=e.from_string("#808080ff"),e.LIGHT_GRAY=e.from_string("#c0c0c0ff"),e.BUTTER=e.from_string("#edd400ff"),e.BUTTER_LIGHT=e.from_string("#fce94fff"),e.BUTTER_DARK=e.from_string("#c4a000ff"),e.ORANGE=e.from_string("#f57900ff"),e.ORANGE_LIGHT=e.from_string("#fcaf3fff"),e.ORANGE_DARK=e.from_string("#ce5c00ff"),e.CHOCOLATE=e.from_string("#c17d11ff"),e.CHOCOLATE_LIGHT=e.from_string("#e9b96eff"),e.CHOCOLATE_DARK=e.from_string("#8f5902ff"),e.CHAMELEON=e.from_string("#73d216ff"),e.CHAMELEON_LIGHT=e.from_string("#8ae234ff"),e.CHAMELEON_DARK=e.from_string("#4e9a06ff"),e.SKY_BLUE=e.from_string("#3465a4ff"),e.SKY_BLUE_LIGHT=e.from_string("#729fcfff"),e.SKY_BLUE_DARK=e.from_string("#204a87ff"),e.PLUM=e.from_string("#75507bff"),e.PLUM_LIGHT=e.from_string("#ad7fa8ff"),e.PLUM_DARK=e.from_string("#5c3566ff"),e.SCARLET_RED=e.from_string("#cc0000ff"),e.SCARLET_RED_LIGHT=e.from_string("#ef2929ff"),e.SCARLET_RED_DARK=e.from_string("#a40000ff"),e.ALUMINIUM_1=e.from_string("#eeeeecff"),e.ALUMINIUM_2=e.from_string("#d3d7cfff"),e.ALUMINIUM_3=e.from_string("#babdb6ff"),e.ALUMINIUM_4=e.from_string("#888a85ff"),e.ALUMINIUM_5=e.from_string("#555753ff"),e.ALUMINIUM_6=e.from_string("#2e3436ff"),e.TRANSPARENT=e.from_string("#00000000"),e}),define("src/brush",["img!../brushes/brush-tile-129.png","./color"],function(a,b){var c=["hard","medium","rough fine","rough coarse","soft","dots small","dots large","rect","hlines","sticks","splotch","splotches coarse"];c.forEach(function(a,b){c[a]=b});var d={hard:.22,medium:.06,"rough fine":.09,"rough coarse":.2,soft:.11,"dots small":.67,"dots large":1,rect:.12,hlines:.1,sticks:.19,splotch:.25,"splotches coarse":.23},e={"rough fine":.5,"rough coarse":.5,sticks:.66,splotch:.6,"splotches coarse":1.2},f={rect:!0,hlines:!0},g=0;a&&(g=a.width/a.height);var h=function(a,b,c,d,e){this.set(a,b,c,d,e)};return h.prototype={},h.Types=c,h.fromJSON=function(a){var c=typeof a=="string"?JSON.parse(a):a,d=new b;d.set_from_color(c.color);var e=c.type===0?"hard":c.type===1?"soft":c.type;return new h(d,c.type,c.size,c.opacity,c.spacing)},h.prototype.equals=function(a){return this===a?!0:b.equal(this.color,a.color)&&this.type===a.type&&this.size===a.size&&this.opacity===a.opacity&&this.spacing===a.spacing},h.prototype.set=function(a,c,d,e,f){return this.color=a||b.BLACK,this.type=c||"hard",this.size=d||32,this.opacity=typeof e=="number"?e:1,this.spacing=f||.225,this},h.prototype.set_from_brush=function(a){return this.set(a.color,a.type,a.size,a.opacity,a.spacing)},h.prototype.setToDefaultSpacing=function(){return this.spacing=d[this.type]||.05,this},h.prototype.rotationIncrement=function(){return e[this.type]||0},h.prototype.followsTangent=function(){return!!f[this.type]},h.prototype.clone=function(){return new h(this.color,this.type,this.size,this.opacity,this.spacing)},h.prototype.toCanvas=function(){var b=Math.floor(a.height/2),c=Math.min(Math.max(1,Math.ceil(this.size/2)),b),d=c*2+1,e=document.createElement("canvas");e.width=e.height=d;var f=e.getContext("2d");f.fillStyle=this.color.to_string().replace(/..$/,""),f.fillRect(0,0,e.width,e.height),f.translate(c+.5,c+.5);var g=Math.max(2,this.size+1)/a.height;f.scale(g,g);var i=0;return h.Types.hasOwnProperty(this.type)?i=h.Types[this.type]:console.warn("Unknown brush type",this.type),i*=a.height,f.globalCompositeOperation="destination-in",f.drawImage(a,-b-.5-i,-b-.5),e},h}),define("src/colorwheel",["./color","./coords"],function(a,b){var c=function(a,b){this.domElement=a,this.container=b||a,this.hue=this.saturation=this.lightness=null,this.setHSL(0,0,0);var c=function(a,b,c){(c||this.container).addEventListener(a,b,!0)}.bind(this),d=function(a,b,c){(c||this.container).removeEventListener(a,b,!0)}.bind(this),e,f,g,h;e=function(a){this._updateThumbFromEvent(a),this.domElement.querySelector(".color").focus(),a.type==="mousedown"?(c("mousemove",f),c("mouseup",g),c("mouseout",h)):(c("touchmove",f),c("touchend",g),c("touchcancel",g),c("touchleave",g),a.preventDefault())}.bind(this),f=function(a){this._updateThumbFromEvent(a)}.bind(this),h=function(a){var b=a.relatedTarget,c=this;(!b||b!==c&&!c.contains(b))&&g(a)},g=function(a){this._updateThumbFromEvent(a),a.type==="mouseup"||a.type==="mouseout"?(d("mousemove",f),d("mouseup",g),d("mouseout",h)):(d("touchmove",f),d("touchend",g),d("touchcancel",g),d("touchleave",g))}.bind(this),c("mousedown",e,this.domElement),c("touchstart",e,this.domElement);var i=function(a){var b=2;a=a||document.parentWindow.event;var c=a.keyCode!=null?a.keyCode:a.charCode,d=this.hue,e=this.saturation;switch(c){case 37:d-=b;break;case 39:d+=b;break;case 38:case 33:e+=b;break;case 40:case 34:e-=b;break;default:return!0}return a.stopPropagation(),a.preventDefault(),d<0&&(d=255),d>255&&(d=0),e=Math.max(0,Math.min(e,255)),this.hue=d,this.saturation=e,this._updateThumbPosition(),this._updateThumbColor(),this.hsCallback(d,e),!1};c("keypress",i,this.domElement)};return c.prototype={},c.prototype._pol2xy=function(a,b,c){c||(c=this.domElement.querySelector(".color").clientWidth);var d=2*Math.PI*a/256,e=b*(c/2)/255,f=Math.cos(d)*e,g=-Math.sin(d)*e;return{x:f,y:g}},c.prototype._updateThumbFromEvent=function(a){if(a.touches){if(a.touches.length===0)return;a={type:a.type,pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,clientX:a.touches[0].clientX,clientY:a.touches[0].clientY,target:a.touches[0].target||a.target||a.srcElement}}var c=this.domElement.querySelector(".color"),d=b.getRelativeEventPosition(a,c),e=d.x-c.offsetWidth/2,f=d.y-c.offsetHeight/2,g=e/(c.clientHeight/2),h=f/(c.clientHeight/2),i=Math.atan2(-h,g)/(2*Math.PI),j=Math.sqrt(g*g+h*h);i<0&&(i+=1),j>1&&(e=f=null),this.hue=Math.round(Math.min(i*256,255)),this.saturation=Math.round(Math.min(j*255,255)),this._updateThumbPosition(e,f),this._updateThumbColor(),this.hsCallback(this.hue,this.saturation)},c.prototype._updateThumbPosition=function(a,b){var c={x:a,y:b};typeof c.x!="number"&&(c=this._pol2xy(this.hue,this.saturation));var d=this.domElement.querySelector(".thumb"),e=Math.round(c.x)+"px,"+Math.round(c.y)+"px";d.style.WebkitTransform="translate3d("+e+",0)",d.style.MozTransform=d.style.transform="translate("+e+")"},c.prototype._updateThumbColor=function(){var b=this.domElement.querySelector(".thumb"),c=a.from_hls(this.hue*360/256,this.lightness/255,this.saturation/255,255);b.style.color=c.to_string().substring(0,7)},c.prototype.setHSL=function(a,b,c){var d=this.hue!==a||this.saturation!==b,e=this.lightness!==c;d&&(this.hue=a,this.saturation=b,this._updateThumbPosition()),e?this.setLightness(c):d&&this._updateThumbColor()},c.prototype.setLightness=function(a){if(a===this.lightness)return;this.lightness=a;var b=this.domElement.querySelector(".white"),c=this.domElement.querySelector(".black");a/=255,a<.5?(b.style.opacity=0,c.style.opacity=1-a*2):(b.style.opacity=a*2-1,c.style.opacity=0),this._updateThumbColor()},c.prototype.onResize=function(){this._updateThumbPosition()},c.prototype.hsCallback=function(a,b){},c}),define("src/drawcommand",["./color","./compat","./brush"],function(a,b,c){var d={DRAW:0,DRAW_END:1,COLOR_CHANGE:2,BRUSH_CHANGE:3,DRAW_START:4,NUM_COMMAND_TYPES:5};Object.freeze(d);var e=function(a){console.assert(a>=0&&a<d.NUM_COMMAND_TYPES),this.type=a};return e.prototype={},e.Type=d,e.fromJSON=function(b){var c=typeof b=="string"?JSON.parse(b):b,d=new e(c.type),f;for(f in c)if(c.hasOwnProperty(f))if(f==="color")d[f]=new a,d[f].set_from_color(c[f]);else if(f==="brush_type"){var g=c[f];d[f]=g===0?"hard":g===1?"soft":g}else d[f]=c[f];return d},e.create_draw_start=function(a){a||(a=0);var b=new e(d.DRAW_START);return b.layer=a,b},e.create_draw=function(a,b){b||(b=Date.now());var c=new e(d.DRAW);return c.pos={x:a.x,y:a.y},c.time=b,c},e.create_draw_end=function(){var a=new e(d.DRAW_END);return a},e.create_color_change=function(a){var b=new e(d.COLOR_CHANGE);return b.color=a.copy(),b},e.create_brush_change=function(a){a=a||{};var b=new e(d.BRUSH_CHANGE);return["brush_type","size","opacity","spacing"].forEach(function(c){c in a&&(b[c]=a[c])}),b},e}),define("src/layer",["./drawcommand","./brush","./point"],function(a,b,c){var d=0,e=function(){this.domElement=document.createElement("div"),this.completedCanvas=document.createElement("canvas"),this.progressCanvas=document.createElement("canvas"),this.domElement.appendChild(this.completedCanvas),this.domElement.appendChild(this.progressCanvas),this.domElement.id="layer"+d++,[this.domElement,this.completedCanvas,this.progressCanvas].forEach(function(a){a.style.position="absolute",a.style.left=a.style.top=a.style.right=a.style.bottom="0px",a.style.width="100%",a.style.height="100%"}),this.progressContext=this.progressCanvas.getContext("2d"),this.completedContext=this.completedCanvas.getContext("2d"),this.brush_stamp=null,this.isDrawingPath=!1,this.lastPoint=new c,this.firstPoint=new c,this.spentDist=0,this._draw_from=new c,this._draw_to=new c,this._draw_tmp=new c};return e.prototype={_getBrushStamp:function(a){if(this.brush_stamp===null){var b=a.clone();b.size*=this.pixel_ratio,b.size=Math.max(0,Math.min(128,Math.round(b.size))),this.brush_stamp=b.toCanvas(),this.progressCanvas.style.opacity=a.opacity}return this.brush_stamp},_drawStamp:function(a,b){this.spentDist=0;var c=this._getBrushStamp(b),d=c.width/2,e=b.rotationIncrement(),f=b.followsTangent();if(f&&this.brushPoints===0&&this.tangent===null)this.firstPoint.set_from_point(a);else if(e===0&&!f)this.progressContext.drawImage(c,a.x-d,a.y-d);else{e*=this.brushPoints;if(f){var g=.8,h=Math.atan2(a.y-this.lastPoint.y,a.x-this.lastPoint.x);if(this.brushPoints===0)h=this.tangent;else if(this.brushPoints>1){var i=this.tangent;i>=h&&(i-=2*Math.PI),h-i>2*Math.PI+i-h&&(i+=2*Math.PI),h=g*h+(1-g)*i,h>Math.PI&&(h-=2*Math.PI),h<-Math.PI&&(h+=2*Math.PI)}this.tangent=h,e+=h,this.brushPoints===1&&(this.brushPoints--,this._drawStamp(this.firstPoint,b),this.brushPoints++)}this.progressContext.save(),this.progressContext.translate(a.x,a.y),this.progressContext.rotate(e),this.progressContext.drawImage(c,-d,-d),this.progressContext.restore()}this.lastPoint.set_from_point(a)},execDraw:function(a,b,d){var e=this._draw_from,f=this._draw_to,g=this._draw_tmp;e.set_from_point(this.lastPoint),f.set(a,b);var h=!1;if(!this.isDrawingPath)this.brushPoints=0,this.tangent=null,this.isDrawingPath=!0,this._drawStamp(f,d),h=!0;else{var i=c.dist(e,f),j,k=Math.max(1,d.size*d.spacing);for(j=k-this.spentDist;j<i;j+=k)this.brushPoints++,this._drawStamp(c.interp(e,f,j/i,g),d),h=!0;this.spentDist=i-(j-k),this.lastPoint.set_from_point(f),!!h}return h},execDrawEnd:function(){return console.assert(this.isDrawingPath),this.completedContext.globalAlpha=this.progressCanvas.style.opacity,this.completedContext.drawImage(this.progressCanvas,0,0),this.progressContext.clearRect(0,0,this.width,this.height),this.isDrawingPath=!1,!1},execCommand:function(b,c){switch(b.type){case a.Type.DRAW_START:return console.assert(!this.isDrawingPath),!1;case a.Type.DRAW:return this.execDraw(b.pos.x*this.pixel_ratio,b.pos.y*this.pixel_ratio,c);case a.Type.DRAW_END:return this.execDrawEnd();case a.Type.COLOR_CHANGE:case a.Type.BRUSH_CHANGE:return console.assert(!this.isDrawingPath),this.brush_stamp=null,!1;default:console.assert(!1,b)}},cancelCurrentStroke:function(){this.progressContext.clearRect(0,0,this.width,this.height),this.isDrawingPath=!1},clear:function(){[this.progressContext,this.completedContext].forEach(function(a){a.clearRect(0,0,this.width,this.height)}.bind(this)),this.isDrawingPath=!1,this.brush_stamp=null},resize:function(a,b,c){var d=a*c,e=b*c;[this,this.completedCanvas,this.progressCanvas].forEach(function(a){a.width=d,a.height=e}),this.isDrawingPath=!1,this.brush_stamp=null,this.pixel_ratio=c},saveCheckpoint:function(){console.assert(!this.isDrawingPath);var a=document.createElement("canvas");return a.width=this.completedCanvas.width,a.height=this.completedCanvas.height,a.getContext("2d").drawImage(this.completedCanvas,0,0),new e.Checkpoint(a)},restoreCheckpoint:function(a){console.assert(typeof a!="string","need to decode checkpoint before restoring"),this.clear(),console.assert(!this.isDrawingPath),this.completedContext.globalAlpha=1,this.completedContext.drawImage(a.canvas,0,0)}},e.Checkpoint=function(a){this.canvas=a},e.Checkpoint.prototype={},e.Checkpoint.prototype.toJSON=function(){return{canvas:this.canvas.toDataURL("image/png")}},e.Checkpoint.fromJSON=function(a,b){var c=typeof a=="string"?JSON.parse(a):a,d=document.createElement("img");d.onload=function(){var a=document.createElement("canvas");a.width=d.width,a.height=d.height,a.getContext("2d").drawImage(d,0,0),b(new e.Checkpoint(a))},d.src=c.canvas},e}),define("src/hslcolor",["./color"],function(a){var b=function(a){return a<0?0:a>255?255:a},c=Math.max,d=Math.min,e=function(a,c,d,e){this.hue=b(a),this.saturation=b(c),this.lightness=b(d),this.opacity=b(e)};return e.prototype.copy=function(){return new e(this.hue,this.saturation,this.lightness,this.opacity)},e.prototype.shade=function(a){var c=b(this.saturation*a),d=b(this.lightness*a);return new e(this.hue,c,d,this.opacity)},e.prototype.lighten=function(){return this.shade(1.3)},e.prototype.darken=function(){return this.shade(.7)},e.prototype.rgbaColor=function(){return a.from_hls(this.hue*360/256,this.lightness/255,this.saturation/255,this.opacity)},e.prototype.rgbString=function(){var a=this.rgbaColor();return"rgb("+Math.round(a.red)+","+Math.round(a.green)+","+Math.round(a.blue)+")"},e.prototype.rgbaString=function(){var a=this.rgbaColor();return"rgba("+Math.round(a.red)+","+Math.round(a.green)+","+Math.round(a.blue)+","+a.alpha/255+")"},e.from_color=function(a){var b=a.to_hls();return new e(b[0]*256/360,b[2]*255,b[1]*255,a.alpha)},e.from_rgba=function(b,c,d,f){return e.from_color(new a(b,c,d,f))},e.equal=function(a,b){return a===b?!0:a.hue===b.hue&&a.saturation===b.saturation&&a.lightness===b.lightness&&a.opacity===b.opacity},e}),define("src/brushdialog",["domReady!","text!./brushdialog.html","./brush","./color","./colorwheel","./coords","./compat","./drawcommand","./hslcolor","./iscroll","./layer","./slider"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(a){return function(b){b.preventDefault(),a(b)}},n=function(a){this.domElement=a,this.width=this.domElement.clientWidth,this.height=this.domElement.clientHeight,this.layer=new k,this.layer.resize(this.width,this.height,window.devicePixelRatio||1),this.domElement.appendChild(this.layer.domElement),this.lastBrush=new c(d.BLACK),this.setFromBrush(this.lastBrush)};n.prototype.setFromBrush=function(a){this.type=a.type,this.size=Math.round(a.size),this.spacing=Math.round(a.spacing*100),this.opacity=a.opacity*255},n.prototype.toBrush=function(a){return new c(a,this.type,this.size,this.opacity/255,this.spacing/100)},n.prototype.update=function(){var a=new c(d.WHITE,this.type,this.size,Math.max(20,this.opacity)/255,this.spacing/100);if(a.equals(this.lastBrush))return;this.lastBrush=a,this.layer.clear();var b=30,e=a.size/2,f=this.width-e,g=a.size/2,i=this.height-g,j,k,l={x:0,y:0};this.layer.execCommand(h.create_draw_start(),a);for(j=0;j<b;j++)k=j/(b-1)*.8+.1,l.x=e+j*(f-e)/(b-1),l.y=g+(.5+Math.sin(2*Math.PI*k)/2)*(i-g),this.layer.execCommand(h.create_draw(l),a);this.layer.execCommand(h.create_draw_end(),a)};var o=0,p=function(d,f){this.id=o++,this.brushpane=d,this._initializing=!0,this.brushpane.innerHTML=b,f&&(d.querySelector(".page_select").style.display="none");var h=this.preview=new n(d.querySelector(".stroke")),k=function(a){var b=d.querySelector("input."+a);return b.name=b.id=a+"_"+this.id,b}.bind(this);["hue","saturation","lightness","opacity"].forEach(function(a){["color_","old_color_"].forEach(function(b){k(b+a)}.bind(this))}.bind(this));var p=["color","brush"];p.forEach(function(a){var b=d.querySelector("."+a+"_select");b.addEventListener("click",m(this.switchPane.bind(this,a)),!1)}.bind(this)),this.switchPane(p[0]),d.querySelector(".closer").addEventListener("click",m(function(a){this.close(!0)}.bind(this)),!1),["size","spacing"].forEach(function(a){["minus","plus"].forEach(function(b){var c=d.querySelector("."+a+" ."+b);c.addEventListener("click",m(function(c){l.increment("brush_"+a+"_"+this.id,b==="minus"?-1:1)}.bind(this)))}.bind(this))}.bind(this));var q=function(){var a={},b={},c=!1,d=function(){c=!1,Object.getOwnPropertyNames(a).forEach(function(c){b[c]&&(a[c].apply(null,b[c]),b[c]=null)})};return function(e,f){return a[e]=f,function(){b[e]=Array.prototype.slice.call(arguments);if(c)return;g.requestAnimationFrame(d),c=!0}}}(),r=this._colorFromInputs.bind(this),s=q("updateColor",this._updateColor.bind(this)),t=this._updateOldColor.bind(this);this.wheel=new e(d.querySelector(".wheel"),d),this.wheel.hsCallback=function(a,b){var c=r();d.querySelector("input.color_hue").value=a,d.querySelector("input.color_saturation").value=b,s(new i(a,b,c.lightness,c.opacity))}.bind(this);var u=q("wheel_setHSL",function(a,b,c){this.wheel.setHSL(a,b,c)}.bind(this)),v=q("preview_update",function(){h.update()}),w=function(){var a=r();s(a),u(a.hue,a.saturation,a.lightness),h.opacity!==a.opacity&&(h.opacity=a.opacity,v())},x=function(){var a=r("old_color_");t(a)},y=function(a){d.querySelector("input.color_lightness").value=Math.round(a),l.updateSlider("color_lightness_"+this.id),w()}.bind(this),z=function(a){this._setInputs(a),w()}.bind(this);["white","black","old"].forEach(function(a){var b=d.querySelector(".swatches > ."+a);b.addEventListener("click",m(function(b){a==="white"?y(255):a==="black"?y(0):z(r("old_color_")),b.target.focus()}))});var A=function(){var a=d.querySelector("input.brush_spacing");h.spacing=parseInt(a.value,10)||5,d.querySelector(".spacing .caption").setAttribute("data-amount",h.spacing);if(this._initializing)return;v()}.bind(this);l.createSlider({inp:k("brush_spacing"),range:[5,200],inc:"1",clickJump:!0,hideInput:!0,callbacks:{update:[A]}});var B=function(){var a=d.querySelector("input.brush_size");h.size=parseInt(a.value,10)||1,d.querySelector(".size .caption").setAttribute("data-amount",h.size);if(this._initializing)return;v()}.bind(this);l.createSlider({inp:k("brush_size"),range:[1,129],inc:"1",clickJump:!0,hideInput:!0,callbacks:{update:[B]}});var C=function(){if(this._initializing)return;w()}.bind(this);["lightness","opacity"].forEach(function(a){var b=d.querySelector("input.color_"+a);l.createSlider({inp:b,range:[0,255],inc:"1",clickJump:!0,hideInput:!0,callbacks:{update:[C]}})});var D=function(){var a=this,b=h.toBrush();b.type=c.Types[a.currPageX];if(b.type===h.type)return;b.setToDefaultSpacing(),h.setFromBrush(b),v()},E=d.querySelector(".shape > .scrollwrapper"),F=E.querySelector(".allbrushes").offsetHeight,G=this.brushscroll=new j(E,{vScroll:!1,snap:F,onAnimationEnd:D}),H=d.querySelector(".shape");H.addEventListener("keypress",function(b){b=b||a.parentWindow.event;var c=b.keyCode!=null?b.keyCode:b.charCode;if(c===37||c===40||c===46||c===34)G.scrollToPage("prev");else if(c===39||c===38||c===45||c===33)G.scrollToPage("next");else return!0;return b.stopPropagation(),b.preventDefault(),!1},!0),h.setFromBrush=function(a){var b=this.id;return function(e){a.call(this,e),G.scrollToPage(c.Types[this.type]),[["size",this.size],["spacing",this.spacing]].forEach(function(a){var c=d.querySelector("input.brush_"+a[0]);c.value=a[1],l.updateSlider("brush_"+a[0]+"_"+b);var e=d.querySelector("."+a[0]+" .caption");e.setAttribute("data-amount",a[1])})}}.bind(this)(h.setFromBrush)};return p.prototype={},p.prototype._colorFromInputs=function(a){var b=a||"color_",c=["hue","saturation","lightness","opacity"];return c=c.map(function(a){var c=this.brushpane.querySelector("input."+b+a);return parseInt(c.value,10)||0}.bind(this)),new i(c[0],c[1],c[2],c[3])},p.prototype._setInputs=function(a,b){var c=b||"color_";["hue","saturation","lightness","opacity"].forEach(function(b){var d=this.brushpane.querySelector("input."+c+b);d.value=a[b],l.updateSlider(c+b+"_"+this.id)}.bind(this))},p.prototype._updateOldColor=function(a){var b=a.rgbaString();[".swatches > .old > span"].forEach(function(a){var c=this.brushpane.querySelector(a);c.style.color=b}.bind(this))},p.prototype._updateColor=function(a){var b=a.rgbString(),c=a.rgbaString();[".color_select > span",".opacity_options .fd-slider-bar"].forEach(function(a){var c=this.brushpane.querySelector(a);c.style.color=b}.bind(this)),[".swatches > .new > span"].forEach(function(a){var b=this.brushpane.querySelector(a);b.style.color=c}.bind(this));var d=(new i(a.hue,255,128,255)).rgbString();[".lightness .fd-slider-inner"].forEach(function(a){var b=this.brushpane.querySelector(a);b.style.color=d}.bind(this)),this.colorCallback&&this.colorCallback(a)},p.prototype.open=function(a,b,c){this.callback=c,this._resize=this.onResize.bind(this),window.addEventListener("resize",this._resize,!1),this.updateBrush(a);var d=this.brushpane.querySelector(".panes"),e=function(){this.brushpane.classList.add("visible"),["transitionend","oTransitionEnd","webkitTransitionEnd"].forEach(function(a){d.removeEventListener(a,e,!0)})}.bind(this);this.switchPane(b)?["transitionend","oTransitionEnd","webkitTransitionEnd"].forEach(function(a){d.addEventListener(a,e,!0)}):e()},p.prototype.updateBrush=function(a,b){this._initializing=!0,this.preview.setFromBrush(a),this.preview.update();var c=i.from_color(a.color);c.opacity=this.preview.opacity,this._setInputs(c),this._updateColor(c),b?this._updateOldColor(this._colorFromInputs("old_color_")):(this._setInputs(c,"old_color_"),this._updateOldColor(c)),this.wheel.setHSL(c.hue,c.saturation,c.lightness),this.onResize(),this._initializing=!1},p.prototype.currentPane=function(){return this.brushpane.classList.contains("color")?"color":"brush"},p.prototype.switchPane=function(a){a=a==="color"?a:"brush";if(this.brushpane.classList.contains(a))return!1;var b=this.brushpane.classList;return["color","brush"].forEach(function(c){c===a?b.add(c):b.remove(c)}),!0},p.prototype.onResize=function(){var a=this.brushpane.querySelector(".allbrushes").offsetHeight;this.brushscroll.options.snap=a,this.brushscroll.refresh(),this.brushscroll.scrollToPage(c.Types[this.preview.type],this.brushscroll.currPageY,0),this.wheel.onResize()},p.prototype.isOpen=function(){return this.brushpane.classList.contains("visible")},p.prototype.close=function(a){window.removeEventListener("resize",this._resize,!1),this.brushpane.classList.remove("visible"),a&&this._invokeCallback()},p.prototype.currentBrush=function(){var a=this._colorFromInputs(),b=a.rgbaColor().add(d.BLACK);return this.preview.toBrush(b)},p.prototype._invokeCallback=function(){this.callback&&this.callback.call(null,this.currentBrush())},p}),require.config({paths:{domReady:"../plugins/domReady",font:"../plugins/font",drw:"../plugins/drw",img:"../plugins/img",webfont:"../plugins/webfont",propertyParser:"../plugins/propertyParser",json:"../plugins/json",text:"../plugins/text"}}),define("brushdemo",["domReady!","./src/brush","./src/brushdialog","./src/color"],function(a,b,c,d){var e=a.querySelector("#brushpane"),f=new c(e),g,h;g=function(){f.open(new b(d.DARK_RED,"soft",32,.75,.35),"color",h)},h=function(a){console.log("closed",a),window.setTimeout(g,3e3)},g()})